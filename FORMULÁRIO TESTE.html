<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formul√°rio de Entrevista Trabalhista - Marques & Alves</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Global styles and fonts */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); /* Dark gradient background */
            color: #e0e0e0; /* Light text for dark theme */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scroll due to particles */
            position: relative; /* For particle animation */
        }

        /* Particle Animation */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }
        .particle {
            position: absolute;
            background-color: rgba(0, 255, 179, 0.4); /* Cyan/greenish glow */
            border-radius: 50%;
            animation: floatAndFade 15s infinite ease-in-out;
        }

        @keyframes floatAndFade {
            0% {
                transform: translateY(0) translateX(0) scale(0.5);
                opacity: 0;
            }
            25% {
                opacity: 1;
            }
            50% {
                transform: translateY(-50vh) translateX(20vw) scale(1);
                opacity: 0.8;
            }
            75% {
                opacity: 0.5;
            }
            100% {
                transform: translateY(-100vh) translateX(40vw) scale(0.5);
                opacity: 0;
            }
        }

        /* Main Container */
        .container {
            max-width: 900px;
            width: 100%;
            margin: 40px auto;
            background: rgba(255, 255, 255, 0.05); /* Glassmorphism background */
            backdrop-filter: blur(10px); /* Glassmorphism effect */
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0,0,0,0.3); /* Stronger shadow for dark theme */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle border */
            position: relative; /* Ensure it's above particles */
            z-index: 1;
        }

        /* Header */
        header {
            background: #000000; /* Solid black */
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Separator */
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .main-title {
            font-size: 2.2rem;
            font-weight: 700;
            text-shadow: 2px 2px 8px rgba(0,255,179,0.5); /* Glowing text shadow */
            margin-bottom: 5px;
            color: #00ffb3; /* Cyan/green for title */
        }

        .contact-info {
            font-size: 0.9rem;
            color: #a0a0a0; /* Slightly lighter gray */
            margin-top: 10px;
            line-height: 1.5;
        }

        /* Progress Bar */
        .progress-container {
            width: calc(100% - 40px);
            background-color: rgba(255, 255, 255, 0.1); /* Lighter glassmorphism */
            border-radius: 10px;
            height: 10px;
            margin: 20px auto;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ffb3, #0099ff); /* Cyan to blue gradient */
            width: 0%;
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }

        .progress-fill.striped {
            background: repeating-linear-gradient(
                -45deg,
                #00ffb3,
                #00ffb3 10px,
                #0099ff 10px,
                #0099ff 20px
            );
            background-size: 200% 100%;
            animation: moveStripes 1s linear infinite;
        }

        @keyframes moveStripes {
            from { background-position: 0 0; }
            to { background-position: -20px 0; }
        }

        .section-indicator {
            text-align: center;
            font-size: 0.9rem;
            color: #a0a0a0;
            margin-top: 10px;
            font-weight: 600;
        }

        /* Form Sections */
        .form-section {
            padding: 30px 40px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #00ffb3; /* Cyan/green for section titles */
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid #0099ff; /* Blue line */
            text-align: center;
            text-shadow: 1px 1px 5px rgba(0,255,179,0.3);
        }

        /* Input Fields */
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-label {
            display: block;
            font-size: 0.95rem;
            font-weight: 500;
            color: #e0e0e0;
            margin-bottom: 8px;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.08); /* Darker glassmorphism */
            color: #ffffff;
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }

        .form-input::placeholder, .form-textarea::placeholder {
            color: #a0a0a0; /* Lighter placeholder text */
            opacity: 0.7;
        }

        /* Border Animation (Circulating Glow) */
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: rgba(0, 255, 179, 0.8); /* Stronger cyan border on focus */
            background: rgba(255, 255, 255, 0.15); /* Lighter background on focus */
            box-shadow: 0 0 0 3px rgba(0, 255, 179, 0.3), /* Inner glow */
                        0 0 0 6px rgba(0, 153, 255, 0.2), /* Outer blue glow */
                        inset 0 0 10px rgba(0, 255, 179, 0.2);
            animation: focusGlow 1.5s infinite alternate ease-in-out; /* Pulsating glow */
        }

        @keyframes focusGlow {
            0% {
                border-color: rgba(0, 255, 179, 0.5);
                box-shadow: 0 0 0 3px rgba(0, 255, 179, 0.3),
                            0 0 0 6px rgba(0, 153, 255, 0.2),
                            inset 0 0 10px rgba(0, 255, 179, 0.2);
            }
            100% {
                border-color: rgba(0, 255, 179, 1);
                box-shadow: 0 0 0 6px rgba(0, 255, 179, 0.6), /* Stronger inner glow */
                            0 0 0 10px rgba(0, 153, 255, 0.4), /* Stronger outer blue glow */
                            inset 0 0 15px rgba(0, 255, 179, 0.4);
            }
        }

        /* Validation Feedback */
        .form-input.valid, .form-textarea.valid, .form-select.valid {
            border-color: #2ed573; /* Green */
            box-shadow: 0 0 0 3px rgba(46, 213, 115, 0.3), inset 0 0 10px rgba(46, 213, 115, 0.2);
        }

        .form-input.invalid, .form-textarea.invalid, .form-select.invalid {
            border-color: #ff4757; /* Red */
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.3), inset 0 0 10px rgba(255, 71, 87, 0.2);
        }
        
        /* Highlight specific invalid input */
        .form-input.highlight-invalid {
            border-color: #ff4757; /* Red */
            box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.3), inset 0 0 10px rgba(255, 71, 87, 0.2);
            animation: pulse-red 1s infinite alternate;
        }

        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 3px rgba(255, 71, 87, 0.3), inset 0 0 10px rgba(255, 71, 87, 0.2); }
            100% { box-shadow: 0 0 0 6px rgba(255, 71, 87, 0.6), inset 0 0 15px rgba(255, 71, 87, 0.4); }
        }

        /* Checkbox and Radio */
        .checkbox-group, .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            font-size: 0.95rem;
            color: #e0e0e0;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 10px 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkbox-item:hover, .radio-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #00ffb3;
            box-shadow: 0 0 10px rgba(0, 255, 179, 0.2);
        }

        .checkbox-item input[type="checkbox"], .radio-item input[type="radio"] {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            accent-color: #00ffb3; /* Cyan/green accent */
            background-color: transparent; /* Ensure background is transparent */
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Two-Column Layout */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            padding: 20px 40px;
            background-color: rgba(255, 255, 255, 0.05); /* Glassmorphism background */
            backdrop-filter: blur(5px);
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(90deg, #0099ff, #007bff); /* Blue gradient */
            color: white;
        }

        .btn-primary:hover {
            box-shadow: 0 6px 20px rgba(0, 153, 255, 0.4);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(90deg, #555, #777); /* Darker gray gradient */
            color: white;
        }

        .btn-secondary:hover {
            background: linear-gradient(90deg, #777, #999);
            transform: translateY(-2px);
        }

        .btn-submit {
            background: linear-gradient(90deg, #2ed573, #20b2aa); /* Green/teal gradient for submit */
            color: white;
        }

        .btn-submit:hover {
            box-shadow: 0 6px 20px rgba(46, 213, 115, 0.4);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        /* Selfie styles */
        #selfieContainer {
            margin-top: 20px;
            text-align: center;
        }
        #selfieVideo {
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid rgba(0, 255, 179, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 179, 0.3);
        }
        #selfieCanvas {
            display: none;
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid rgba(0, 255, 179, 0.3);
            box-shadow: 0 0 15px rgba(0, 255, 179, 0.3);
        }
        #takeSelfieBtn, #retakeSelfieBtn, #uploadSelfieBtn {
            margin-top: 10px;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        #takeSelfieBtn, #uploadSelfieBtn {
            background: linear-gradient(90deg, #0099ff, #007bff);
            color: white;
        }
        #takeSelfieBtn:hover, #uploadSelfieBtn:hover {
            background: linear-gradient(90deg, #007bff, #0056b3);
        }
        #retakeSelfieBtn {
            background: linear-gradient(90deg, #ff4757, #cc3344);
            color: white;
            margin-left: 10px;
        }
        #retakeSelfieBtn:hover {
            background: linear-gradient(90deg, #cc3344, #992233);
        }

        /* Tooltip styles */
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: rgba(0,0,0,0.8); /* Darker background */
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px 10px;
            position: absolute;
            z-index: 10; /* Higher z-index */
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.3;
            border: 1px solid rgba(0, 255, 179, 0.3); /* Cyan border */
            box-shadow: 0 0 10px rgba(0, 255, 179, 0.2);
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: rgba(0,0,0,0.8) transparent transparent transparent;
        }

        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Validation Icons */
        .validation-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            pointer-events: none;
        }

        .text-green-500 {
            color: #2ed573; /* Brighter green */
        }

        .text-red-500 {
            color: #ff4757; /* Brighter red */
        }

        @keyframes blink-green {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .blink-green {
            animation: blink-green 0.5s ease-in-out 2;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: rgba(255, 255, 255, 0.08); /* Glassmorphism background */
            backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 255, 179, 0.3); /* Glowing shadow */
            text-align: center;
            max-width: 500px;
            width: 90%;
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            border: 1px solid rgba(0, 255, 179, 0.2);
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #00ffb3; /* Cyan/green title */
            margin-bottom: 20px;
            text-shadow: 1px 1px 5px rgba(0,255,179,0.3);
        }

        .modal-message {
            font-size: 1rem;
            color: #e0e0e0;
            margin-bottom: 30px;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        /* Print styles - Copied and adapted from CALCULADORA.html */
        @media print {
            @page {
                size: A4 portrait;
                margin: 10mm;
            }
            body {
                background-color: #FFF;
                color: #000;
                font-family: 'Inter', sans-serif;
                font-size: 9pt;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .container {
                max-width: 100%;
                margin: 0;
                padding: 0;
                box-shadow: none;
                border-radius: 0;
                background: #FFF; /* Override glassmorphism for print */
                backdrop-filter: none;
                border: none;
            }
            header {
                background-color: #fff;
                color: #000;
                padding: 10px 0;
                border-bottom: 1px solid #ccc;
                text-align: left;
            }
            .header-content {
                align-items: flex-start;
            }
            .main-title {
                font-size: 1.5rem;
                text-shadow: none;
                margin-bottom: 5px;
                color: #000;
            }
            .contact-info {
                font-size: 0.7rem;
                color: #555;
            }

            .navigation-buttons, .progress-container, #selfieContainer, #takeSelfieBtn, #retakeSelfieBtn, #uploadSelfieBtn, #fileInput, .tooltip-container, .validation-icon, .modal-overlay, #printBtn, .particles {
                display: none !important;
            }
            .form-section {
                display: block !important;
                page-break-inside: avoid;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fff;
                border: 1px solid #ddd;
                border-radius: 8px;
            }
            .form-section-title {
                font-size: 1.2rem;
                color: #333;
                border-color: #bbb;
                text-align: left;
                margin-bottom: 15px;
                padding-bottom: 5px;
            }
            .form-group {
                margin-bottom: 10px;
            }
            .form-label {
                font-size: 0.85rem;
                font-weight: 600;
                color: #333;
                margin-bottom: 3px;
            }
            .form-input, .form-textarea, .form-select {
                border: 1px solid #ccc;
                background-color: #f9f9f9;
                padding: 5px 8px;
                font-size: 0.8rem;
                color: #000;
            }
            .checkbox-item, .radio-item {
                font-size: 0.8rem;
                color: #000; /* Ensure text is black for print */
                background: #fff; /* White background for print */
                border: 1px solid #ccc; /* Light border for print */
            }
            .checkbox-item input[type="checkbox"], .radio-item input[type="radio"] {
                width: 14px;
                height: 14px;
                margin-right: 5px;
                accent-color: #3498db; /* Keep original accent color for print */
            }
            .two-column {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            .text-gray-700 {
                color: #444;
                font-size: 0.85rem;
            }
            .list-disc li {
                margin-left: 15px;
                font-size: 0.8rem;
            }
            #selfieCanvas[data-selfie-taken="true"] {
                display: block !important;
                max-width: 150px;
                height: auto;
                margin: 10px auto;
                border: 1px solid #ccc;
            }

            .print-emoji::before {
                content: attr(data-emoji);
                margin-right: 5px;
            }

            .print-answer {
                font-weight: normal;
                color: #000;
                background-color: #f0f0f0;
                padding: 3px 8px;
                border-radius: 4px;
                display: inline-block;
                margin-top: 5px;
                border: 1px dashed #ccc;
            }
            .print-answer.empty {
                color: #888;
                font-style: italic;
                background-color: #fdfdfd;
                border: 1px dashed #eee;
            }

            /* Styles for Probability Meter in Print */
            .probability-gauge-print {
                display: block !important; /* Show for print */
                text-align: center;
                margin-top: 20px;
                padding: 15px;
                border: 1px solid #ccc;
                border-radius: 8px;
                background-color: #f9f9f9;
            }
            .probability-gauge-print h2 {
                color: #333;
                font-size: 1.2rem;
                margin-bottom: 10px;
            }
            .probability-gauge-print .probability-value-print {
                font-size: 2rem;
                font-weight: bold;
                margin-bottom: 5px;
            }
            .probability-gauge-print .probability-text-print {
                font-size: 1rem;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            .probability-gauge-print .risk-analysis-print {
                margin-top: 15px;
                padding: 10px;
                border: 1px solid #ddd;
                border-left: 4px solid;
                border-radius: 5px;
                background-color: #fff;
                font-size: 0.9rem;
                line-height: 1.4;
                color: #555;
            }
            .probability-gauge-print .risk-analysis-print.low-print { border-left-color: #ff4757; color: #ff4757; }
            .probability-gauge-print .risk-analysis-print.medium-print { border-left-color: #ffa502; color: #ffa502; }
            .probability-gauge-print .risk-analysis-print.high-print { border-left-color: #2ed573; color: #2ed573; }
        }

        /* Responsiveness for smaller screens */
        @media (max-width: 768px) {
            .container {
                margin: 20px auto;
                border-radius: 0;
            }
            header {
                padding: 30px 15px;
                border-radius: 0;
            }
            .main-title {
                font-size: 1.8rem;
            }
            .contact-info {
                font-size: 0.8rem;
            }
            .form-section {
                padding: 20px 25px;
            }
            .form-section-title {
                font-size: 1.5rem;
            }
            .two-column {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .navigation-buttons {
                padding: 15px 25px;
                flex-direction: column;
                gap: 15px;
                border-radius: 0;
            }
            .btn {
                width: 100%;
            }
        }

        /* --- Styles for Probability Meter Section (from provided HTML) --- */
        .probability-section {
            display: none; /* Hidden by default, activated as a step */
            padding: 30px 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px; /* Match container */
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.5s ease-in-out;
            color: #e0e0e0;
            position: relative; /* For loading overlay */
        }
        .probability-section.active {
            display: block;
        }

        .probability-section .header { /* Re-use header styles but adjust for section */
            text-align: center;
            margin-bottom: 30px;
            background: none; /* No background for inner section header */
            padding: 0;
            border-bottom: none;
        }
        .probability-section .title {
            font-size: 2rem;
            font-weight: 700;
            color: #00ffb3;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0,255,179,0.5);
        }
        .probability-section .subtitle {
            font-size: 1.1rem;
            color: #a0a0a0;
            font-weight: 400;
        }

        /* VELOC√çMETRO */
        .probability-gauge {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 20px auto;
        }

        .gauge-bg {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .gauge-arc {
            stroke-width: 20;
            fill: none;
            stroke-linecap: round;
        }

        .gauge-bg-arc {
            stroke: rgba(255, 255, 255, 0.1);
        }

        .gauge-fill {
            stroke: url(#gaugeGradient);
            stroke-dasharray: 377; /* Circunfer√™ncia do arco */
            stroke-dashoffset: 377;
            transition: stroke-dashoffset 2s ease-in-out;
        }

        .gauge-needle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 3px;
            height: 120px;
            background: linear-gradient(to top, #fff 0%, #00ffb3 100%);
            transform-origin: bottom center;
            transform: translate(-50%, -100%) rotate(-90deg);
            transition: transform 2s ease-in-out;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(0, 255, 179, 0.5);
        }

        .gauge-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #00ffb3 0%, #ffffff 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px rgba(0, 255, 179, 0.7);
        }

        .gauge-labels {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .gauge-label {
            position: absolute;
            font-size: 0.9rem;
            font-weight: 600;
            transform: translate(-50%, -50%);
        }

        .label-low {
            bottom: 20px;
            left: 20%;
            color: #ff4757;
        }

        .label-medium {
            bottom: 10px;
            left: 50%;
            color: #ffa502;
        }

        .label-high {
            bottom: 20px;
            right: 20%;
            color: #2ed573;
        }

        .probability-display {
            text-align: center;
            margin-top: 20px;
        }

        .probability-value {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 5px;
            transition: color 1s ease;
        }

        .probability-text {
            font-size: 1.2rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: color 1s ease;
        }

        .risk-analysis {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border-left: 4px solid transparent;
            transition: border-color 1s ease;
            color: #e0e0e0;
        }

        .risk-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #00ffb3;
        }

        .risk-factors {
            font-size: 0.9rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        /* Estados do medidor */
        .low-probability {
            color: #ff4757;
        }

        .medium-probability {
            color: #ffa502;
        }

        .high-probability {
            color: #2ed573;
        }

        .risk-analysis.low {
            border-left-color: #ff4757;
        }

        .risk-analysis.medium {
            border-left-color: #ffa502;
        }

        .risk-analysis.high {
            border-left-color: #2ed573;
        }

        /* Hidden probability questions - for internal use */
        .hidden-probability-question {
            display: none !important;
        }

        /* Diagonal Progress Bar for Analysis Loading */
        .probability-loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(26, 26, 46, 0.9); /* Semi-transparent dark background */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 5; /* Above other content in the section */
            transition: opacity 0.5s ease, visibility 0.5s ease;
            opacity: 1;
            visibility: visible;
            border-radius: 12px;
            color: #e0e0e0;
            font-size: 1.2rem;
        }

        .probability-loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .diagonal-progress-bar {
            width: 200px;
            height: 10px;
            background: repeating-linear-gradient(
                45deg,
                #00ffb3,
                #00ffb3 10px,
                #0099ff 10px,
                #0099ff 20px
            );
            background-size: 200% 100%;
            animation: moveDiagonalStripes 1.5s linear infinite;
            border-radius: 5px;
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(0, 255, 179, 0.5);
        }

        @keyframes moveDiagonalStripes {
            from { background-position: 0 0; }
            to { background-position: -40px 0; }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles-container"></div>
    <div class="container">
        <header>
            <div class="header-content">
                <h1 class="main-title">FORMUL√ÅRIO DE ENTREVISTA TRABALHISTA</h1>
                <div class="contact-info">
                    <p><strong>MARQUES E ALVES ADVOGADOS ASSOCIADOS</strong></p>
                    <p>üìû (19) 9 9831-4237 | üìß advocaciamatao@gmail.com</p>
                    <p>üìç R. Sebasti√£o de Souza, 205 - SALA 62 - Centro, Campinas - SP, 13013-173</p>
                </div>
            </div>
        </header>

        <div class="progress-container">
            <div id="progressBarFill" class="progress-fill"></div>
        </div>
        <div id="sectionIndicator" class="section-indicator"></div>

        <!-- Form action updated for FormSubmit.co -->
        <form id="laborForm" action="https://formsubmit.co/advocaciamatao@gmail.com" method="POST">
            <!-- Hidden input for FormSubmit.co to disable CAPTCHA -->
            <input type="hidden" name="_captcha" value="false">
            <!-- Hidden input for FormSubmit.co to redirect after submission -->
            <input type="hidden" name="_next" value="https://formsubmit.co/success">

            <section id="step-1" class="form-section active">
                <h2 class="form-section-title">DADOS PESSOAIS DO CLIENTE</h2>
                <div class="two-column">
                    <div class="form-group">
                        <label for="nome_completo" class="form-label">
                            Nome Completo:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Insira seu nome completo, sem abrevia√ß√µes.</span>
                            </span>
                        </label>
                        <input type="text" id="nome_completo" name="Nome Completo" placeholder="INSIRA SEU NOME COMPLETO" class="form-input" required>
                        <span class="validation-icon" id="nome_completo_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="data_nascimento" class="form-label">
                            Data de Nascimento:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe sua data de nascimento no formato DD/MM/AAAA.</span>
                            </span>
                        </label>
                        <input type="date" id="data_nascimento" name="Data de Nascimento" class="form-input" required>
                        <span class="validation-icon" id="data_nascimento_icon"></span>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="cpf" class="form-label">
                            CPF:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Insira seu Cadastro de Pessoa F√≠sica. Somente n√∫meros.</span>
                            </span>
                        </label>
                        <input type="text" id="cpf" name="CPF" placeholder="000.000.000-00" class="form-input" required>
                        <span class="validation-icon" id="cpf_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="rg" class="form-label">
                            RG:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Insira seu Registro Geral.</span>
                            </span>
                        </label>
                        <input type="text" id="rg" name="RG" placeholder="00.000.000-0" class="form-input" required>
                        <span class="validation-icon" id="rg_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="estado_rg" class="form-label">
                        Estado do Brasil onde foi feito seu RG:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione o estado onde seu RG foi emitido.</span>
                        </span>
                    </label>
                    <select id="estado_rg" name="Estado RG" class="form-select" required>
                        <option value="">Selecione o Estado</option>
                        <option value="AC">Acre</option><option value="AL">Alagoas</option><option value="AP">Amap√°</option><option value="AM">Amazonas</option><option value="BA">Bahia</option><option value="CE">Cear√°</option><option value="DF">Distrito Federal</option><option value="ES">Esp√≠rito Santo</option><option value="GO">Goi√°s</option><option value="MA">Maranh√£o</option><option value="MT">Mato Grosso</option><option value="MS">Mato Grosso do Sul</option><option value="MG">Minas Gerais</option><option value="PA">Par√°</option><option value="PB">Para√≠ba</option><option value="PR">Paran√°</option><option value="PE">Pernambuco</option><option value="PI">Piau√≠</option><option value="RJ">Rio de Janeiro</option><option value="RN">Rio Grande do Norte</option><option value="RS">Rio Grande do Sul</option><option value="RO">Rond√¥nia</option><option value="RR">Roraima</option><option value="SC">Santa Catarina</option><option value="SP">S√£o Paulo</option><option value="SE">Sergipe</option><option value="TO">Tocantins</option>
                    </select>
                    <span class="validation-icon" id="estado_rg_icon"></span>
                </div>
                <div class="form-group">
                    <label for="estado_civil" class="form-label">
                        Estado Civil:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione seu estado civil atual. Se em uni√£o est√°vel, marque se possui o documento do cart√≥rio.</span>
                        </span>
                    </label>
                    <select id="estado_civil" name="Estado Civil" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="solteiro">Solteiro(a)</option>
                        <option value="casado">Casado(a)</option>
                        <option value="divorciado">Divorciado(a)</option>
                        <option value="viuvo">Vi√∫vo(a)</option>
                        <option value="separado_judicialmente">Separado(a) judicialmente</option>
                        <option value="uniao_estavel">Uni√£o Est√°vel (com documento do cart√≥rio)</option>
                    </select>
                    <span class="validation-icon" id="estado_civil_icon"></span>
                </div>
                <div class="form-group">
                    <label for="genero" class="form-label">
                        G√™nero:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione seu g√™nero.</span>
                        </span>
                    </label>
                    <select id="genero" name="G√™nero" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="feminino">Feminino</option>
                        <option value="masculino">Masculino</option>
                        <option value="nao_informar">Prefiro n√£o informar</option>
                    </select>
                    <span class="validation-icon" id="genero_icon"></span>
                </div>
                <div class="form-group">
                    <label for="cep" class="form-label">
                        N√∫mero do CEP:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Digite seu CEP para preenchimento autom√°tico do endere√ßo.</span>
                        </span>
                    </label>
                    <input type="text" id="cep" name="CEP Pessoal" placeholder="00000-000" class="form-input" required maxlength="9">
                    <span class="validation-icon" id="cep_icon"></span>
                </div>
                <div class="form-group">
                    <label for="endereco_rua" class="form-label">
                        Endere√ßo Completo (Rua):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP.</span>
                        </span>
                    </label>
                    <input type="text" id="endereco_rua" name="Endere√ßo Pessoal" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                    <span class="validation-icon" id="endereco_rua_icon"></span>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="numero_casa" class="form-label">
                            N√∫mero da casa:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Insira o n√∫mero do seu im√≥vel. Campo obrigat√≥rio.</span>
                            </span>
                        </label>
                        <input type="text" id="numero_casa" name="N√∫mero da Casa" placeholder="COLOQUE O N√öMERO DA SUA CASA" class="form-input" required>
                        <span class="validation-icon" id="numero_casa_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="nome_bairro" class="form-label">
                            Nome do bairro:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP.</span>
                            </span>
                        </label>
                        <input type="text" id="nome_bairro" name="Bairro Pessoal" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="nome_bairro_icon"></span>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="nome_cidade" class="form-label">
                            Nome da cidade:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP.</span>
                            </span>
                        </label>
                        <input type="text" id="nome_cidade" name="Cidade Pessoal" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="nome_cidade_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="nome_estado" class="form-label">
                            Nome do estado:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP.</span>
                            </span>
                        </label>
                        <input type="text" id="nome_estado" name="Estado Pessoal" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="nome_estado_icon"></span>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="whatsapp" class="form-label">
                            WhatsApp:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">N√∫mero de telefone com WhatsApp, incluindo o DDD.</span>
                            </span>
                        </label>
                        <input type="tel" id="whatsapp" name="WhatsApp" placeholder="(DD) 9XXXX-XXXX" class="form-input" required>
                        <span class="validation-icon" id="whatsapp_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="telefone_emergencia" class="form-label">
                            Telefone de emerg√™ncia:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">N√∫mero de telefone para contato em caso de emerg√™ncia (diferente do seu WhatsApp).</span>
                            </span>
                        </label>
                        <input type="tel" id="telefone_emergencia" name="Telefone de Emerg√™ncia" placeholder="(DD) 9XXXX-XXXX (diferente do seu WhatsApp)" class="form-input">
                        <span class="validation-icon" id="telefone_emergencia_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email" class="form-label">
                        E-mail:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Insira seu endere√ßo de e-mail principal para contato.</span>
                        </span>
                    </label>
                    <input type="email" id="email" name="E-mail" placeholder="COLOQUE O SEU ENDERE√áO DE E-MAIL" class="form-input" required>
                    <span class="validation-icon" id="email_icon"></span>
                </div>
                <div class="form-group">
                    <label for="profissao" class="form-label">
                        Profiss√£o/Ocupa√ß√£o:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Qual sua profiss√£o atual? Se desempregado, informe "Desempregado".</span>
                        </span>
                    </label>
                    <input type="text" id="profissao" name="Profiss√£o" placeholder="QUAL √â A SUA PROFISS√ÉO ATUAL, SE N√ÉO ESTIVER TRABALHANDO COLOQUE DESEMPREGADO" class="form-input" required>
                    <span class="validation-icon" id="profissao_icon"></span>
                </div>
                <div class="form-group">
                    <label class="form-label">Prefer√™ncias de Comunica√ß√£o:</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="receber_email" name="Receber Email" value="sim" checked>
                            <label for="receber_email">Desejo receber comunica√ß√£o por e-mail</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="receber_whatsapp" name="Receber WhatsApp" value="sim" checked>
                            <label for="receber_whatsapp">Desejo receber atualiza√ß√µes pelo WhatsApp</label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="numero_dependentes" class="form-label">
                        N√∫mero de dependentes (se houver):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Informe o n√∫mero de pessoas que dependem financeiramente de voc√™.</span>
                        </span>
                    </label>
                    <input type="number" id="numero_dependentes" name="N√∫mero de Dependentes" placeholder="0" class="form-input" min="0" value="0">
                    <span class="validation-icon" id="numero_dependentes_icon"></span>
                </div>
            </section>

            <section id="step-2" class="form-section">
                <h2 class="form-section-title">DADOS DA EMPRESA/EMPREGADOR</h2>
                <div class="form-group">
                    <label for="razao_social" class="form-label">
                        Raz√£o Social:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Nome legal da empresa, conforme seu holerite ou registro.</span>
                        </span>
                    </label>
                    <input type="text" id="razao_social" name="Raz√£o Social da Empresa" placeholder="COLOQUE O NOME DA EMPRESA CONFORME SEU HOLERITE" class="form-input" required>
                    <span class="validation-icon" id="razao_social_icon"></span>
                </div>
                <div class="form-group">
                    <label for="nome_fantasia" class="form-label">
                        Nome Fantasia:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Nome comercial da empresa. Se n√£o souber, repita a Raz√£o Social.</span>
                        </span>
                    </label>
                    <input type="text" id="nome_fantasia" name="Nome Fantasia da Empresa" placeholder="SE N√ÉO SOUBER REPITA O NOME DE CIMA" class="form-input">
                    <span class="validation-icon" id="nome_fantasia_icon"></span>
                </div>
                <div class="form-group">
                    <label for="cnpj" class="form-label">
                        CNPJ:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Cadastro Nacional de Pessoa Jur√≠dica da empresa (encontrado no holerite).</span>
                        </span>
                    </label>
                    <input type="text" id="cnpj" name="CNPJ da Empresa" placeholder="00.000.000/0000-00 (aparece no holerite)" class="form-input" required>
                    <span class="validation-icon" id="cnpj_icon"></span>
                </div>
                <div class="form-group">
                    <label for="cep_empresa" class="form-label">
                        N√∫mero do CEP da rua da empresa:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Digite o CEP do endere√ßo da empresa.</span>
                        </span>
                    </label>
                    <input type="text" id="cep_empresa" name="CEP da Empresa" placeholder="00000-000" class="form-input" required maxlength="9">
                    <span class="validation-icon" id="cep_empresa_icon"></span>
                </div>
                <div class="form-group">
                    <label for="endereco_empresa_rua" class="form-label">
                        Endere√ßo Completo (Rua da Empresa):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP da empresa.</span>
                        </span>
                    </label>
                    <input type="text" id="endereco_empresa_rua" name="Endere√ßo da Empresa" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                    <span class="validation-icon" id="endereco_empresa_rua_icon"></span>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="numero_empresa" class="form-label">
                            N√∫mero da empresa:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Insira o n√∫mero do im√≥vel da empresa. Campo obrigat√≥rio.</span>
                            </span>
                        </label>
                        <input type="text" id="numero_empresa" name="N√∫mero da Empresa" placeholder="COLOQUE O N√öMERO" class="form-input" required>
                        <span class="validation-icon" id="numero_empresa_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="bairro_empresa" class="form-label">
                            Nome do bairro onde a empresa fica:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP da empresa.</span>
                            </span>
                        </label>
                        <input type="text" id="bairro_empresa" name="Bairro da Empresa" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="bairro_empresa_icon"></span>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="cidade_empresa" class="form-label">
                            Nome da cidade onde a empresa fica:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP da empresa.</span>
                            </span>
                        </label>
                        <input type="text" id="cidade_empresa" name="Cidade da Empresa" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="cidade_empresa_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="estado_empresa" class="form-label">
                            Nome do estado que a empresa tem sede:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Este campo ser√° preenchido automaticamente ap√≥s informar o CEP da empresa.</span>
                            </span>
                        </label>
                        <input type="text" id="estado_empresa" name="Estado da Empresa" placeholder="Ser√° preenchido automaticamente" class="form-input" readonly required>
                        <span class="validation-icon" id="estado_empresa_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="ramo_atividade" class="form-label">
                        Ramo de Atividade:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Descreva o principal servi√ßo ou setor de atua√ß√£o da empresa.</span>
                        </span>
                    </label>
                    <input type="text" id="ramo_atividade" name="Ramo de Atividade da Empresa" placeholder="QUAL √â O PRINCIPAL SERVI√áO QUE A EMPRESA PRESTA?" class="form-input" required>
                    <span class="validation-icon" id="ramo_atividade_icon"></span>
                </div>

                <!-- New: Public Servant Questions -->
                <div class="form-group">
                    <label for="empregador_publico" class="form-label">
                        O empregador √© um √≥rg√£o/entidade p√∫blica (Municipal, Estadual ou Federal)?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se o seu empregador √© uma institui√ß√£o do governo.</span>
                        </span>
                    </label>
                    <select id="empregador_publico" name="Empregador P√∫blico" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="empregador_publico_icon"></span>
                </div>

                <div id="public_servant_questions" style="display:none;">
                    <h3 class="form-section-title">DADOS DO SERVIDOR P√öBLICO</h3>
                    <div class="form-group">
                        <label for="regime_juridico" class="form-label">
                            Qual √© o seu regime jur√≠dico de contrata√ß√£o?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe se √© CLT, Estatut√°rio, Tempor√°rio, Comissionado, etc.</span>
                            </span>
                        </label>
                        <input type="text" id="regime_juridico" name="Regime Jur√≠dico" placeholder="Ex: Estatut√°rio, CLT, Comissionado" class="form-input">
                        <span class="validation-icon" id="regime_juridico_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="orgao_publico_completo" class="form-label">
                            Nome completo do √≥rg√£o ou entidade p√∫blica:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Ex: Prefeitura Municipal de Campinas, Minist√©rio da Fazenda.</span>
                            </span>
                        </label>
                        <input type="text" id="orgao_publico_completo" name="√ìrg√£o P√∫blico" class="form-input">
                        <span class="validation-icon" id="orgao_publico_completo_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="cargo_efetivo_comissionado" class="form-label">
                            Se voc√™ ocupa um cargo comissionado, qual era o seu cargo efetivo (se houver) antes da nomea√ß√£o?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se aplic√°vel, informe seu cargo de origem.</span>
                            </span>
                        </label>
                        <input type="text" id="cargo_efetivo_comissionado" name="Cargo Efetivo (Comissionado)" class="form-input">
                        <span class="validation-icon" id="cargo_efetivo_comissionado_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="ingresso_servico_publico" class="form-label">
                            Voc√™ ingressou no servi√ßo p√∫blico por meio de concurso p√∫blico ou processo seletivo simplificado? Se sim, qual o ano e o nome do concurso/processo?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Ex: Concurso P√∫blico PM SP 2010.</span>
                            </span>
                        </label>
                        <textarea id="ingresso_servico_publico" name="Ingresso Servi√ßo P√∫blico" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="ingresso_servico_publico_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="afastamentos_estatutarios" class="form-label">
                            Voc√™ j√° teve algum afastamento espec√≠fico previsto no estatuto do servidor p√∫blico (Ex: licen√ßa para tratar de interesses particulares, licen√ßa pr√™mio, licen√ßa para capacita√ß√£o, disponibilidade)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva o tipo e per√≠odo do afastamento.</span>
                            </span>
                        </label>
                        <textarea id="afastamentos_estatutarios" name="Afastamentos Estatut√°rios" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="afastamentos_estatutarios_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="processos_disciplinares" class="form-label">
                            Voc√™ j√° foi alvo de algum Processo Administrativo Disciplinar (PAD) ou Sindic√¢ncia? Se sim, qual o resultado?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe o processo e o desfecho (arquivado, penalidade, etc.).</span>
                            </span>
                        </label>
                        <textarea id="processos_disciplinares" name="Processos Disciplinares" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="processos_disciplinares_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="acumulo_cargos" class="form-label">
                            Voc√™ acumula outro cargo p√∫blico (federal, estadual ou municipal)? Se sim, qual o cargo e o √≥rg√£o?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Ex: Professor na Rede Estadual e T√©cnico na Prefeitura.</span>
                            </span>
                        </label>
                        <textarea id="acumulo_cargos" name="Ac√∫mulo de Cargos P√∫blicos" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="acumulo_cargos_icon"></span>
                    </div>
                </div>
                <!-- End: Public Servant Questions -->
            </section>

            <section id="step-3" class="form-section">
                <h2 class="form-section-title">DADOS DO CONTRATO DE TRABALHO</h2>
                <div class="two-column">
                    <div class="form-group">
                        <label for="data_admissao" class="form-label">
                            Data de Admiss√£o (DD/MM/AAAA):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Data em que voc√™ come√ßou a trabalhar na empresa.</span>
                            </span>
                        </label>
                        <input type="date" id="data_admissao" name="Data de Admiss√£o" class="form-input" required>
                        <span class="validation-icon" id="data_admissao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="data_demissao" class="form-label">
                            Data de Demiss√£o (DD/MM/AAAA):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se j√° foi demitido, informe a data da demiss√£o. Se ainda trabalha, deixe em branco.</span>
                            </span>
                        </label>
                        <input type="date" id="data_demissao" name="Data de Demiss√£o" class="form-input">
                        <span class="validation-icon" id="data_demissao_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <p id="tempo_registro" style="color: #a0a0a0; font-weight: bold; margin-top: 10px;"></p>
                </div>
                <div class="form-group">
                    <label for="trabalhando_ainda" class="form-label">
                        Est√° trabalhando ainda?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione se voc√™ ainda est√° empregado na empresa em quest√£o.</span>
                        </span>
                    </label>
                    <select id="trabalhando_ainda" name="Trabalhando Atualmente" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                        <option value="ferias">ESTOU DE F√âRIAS</option>
                    </select>
                    <span class="validation-icon" id="trabalhando_ainda_icon"></span>
                </div>
                <div class="form-group">
                    <label for="cargo_funcao" class="form-label">
                        Cargo/Fun√ß√£o:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Seu cargo ou fun√ß√£o exercida na empresa.</span>
                        </span>
                    </label>
                    <input type="text" id="cargo_funcao" name="Cargo/Fun√ß√£o" class="form-input" required>
                    <span class="validation-icon" id="cargo_funcao_icon"></span>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="salario_admissao" class="form-label">
                            Sal√°rio na Admiss√£o (R$):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Seu sal√°rio bruto no in√≠cio do contrato.</span>
                            </span>
                        </label>
                        <input type="text" id="salario_admissao" name="Sal√°rio na Admiss√£o" placeholder="0.00" class="form-input mask-money" required>
                        <span class="validation-icon" id="salario_admissao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="ultimo_salario" class="form-label">
                            √öltimo Sal√°rio (R$):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Seu √∫ltimo sal√°rio bruto recebido.</span>
                            </span>
                        </label>
                        <input type="text" id="ultimo_salario" name="√öltimo Sal√°rio" placeholder="0.00" class="form-input mask-money" required>
                        <span class="validation-icon" id="ultimo_salario_icon"></span>
                    </div>
                </div>
                <!-- Updated: Salary Difference Display -->
                <div class="form-group">
                    <p id="diferenca_salarial" style="color: #00ffb3; font-weight: bold; margin-top: -10px;"></p>
                </div>
                <div class="form-group">
                    <label for="data_ultimo_salario" class="form-label">
                        Data do √öltimo Sal√°rio (DD/MM/AAAA):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Data do pagamento do seu √∫ltimo sal√°rio.</span>
                        </span>
                    </label>
                    <input type="date" id="data_ultimo_salario" name="Data √öltimo Sal√°rio" class="form-input" required>
                    <span class="validation-icon" id="data_ultimo_salario_icon"></span>
                </div>
                <div class="form-group">
                    <label for="tipo_contrato" class="form-label">
                        Tipo de Contrato:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione o tipo de contrato de trabalho (ex: CLT, Tempor√°rio, Est√°gio).</span>
                        </span>
                    </label>
                    <select id="tipo_contrato" name="Tipo de Contrato" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="clt">CLT</option><option value="temporario">Tempor√°rio</option><option value="estagio">Est√°gio</option><option value="aprendizagem">Aprendizagem</option><option value="intermitente">Intermitente</option><option value="autonomo_pj">Aut√¥nomo/PJ</option><option value="home_office">Home Office</option><option value="outro_contrato">Outro</option>
                    </select>
                    <span class="validation-icon" id="tipo_contrato_icon"></span>
                </div>
                <div class="form-group">
                    <label for="tipo_jornada" class="form-label">
                        Tipo de Jornada:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione o tipo de jornada de trabalho (ex: 8h/dia, 12x36).</span>
                        </span>
                    </label>
                    <select id="tipo_jornada" name="Tipo de Jornada" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="tempo_integral">Jornada de Tempo Integral (Padr√£o: 8h/dia, 44h/semana)</option>
                        <option value="parcial">Jornada Parcial (At√© 25h/semana ou 30h/semana com extras)</option>
                        <option value="12x36">Jornada 12x36 (12h trabalho / 36h descanso)</option>
                        <option value="noturna">Jornada Noturna (Entre 22h e 5h)</option>
                        <option value="turnos_ininterruptos">Jornada em Turnos Ininterruptos (Revezamento cont√≠nuo)</option>
                        <option value="flexivel">Jornada com Hor√°rio Flex√≠vel (Vari√°vel dentro de limites)</option>
                        <option value="domestico">Jornada do Trabalhador Dom√©stico (M√°x. 44h/semana)</option>
                        <option value="rural">Jornada do Trabalhador Rural (M√°x. 44h ou 48h/semana)</option>
                        <option value="outro_jornada">Outra Jornada (especificar)</option>
                    </select>
                    <span class="validation-icon" id="tipo_jornada_icon"></span>
                </div>
                <div class="form-group" id="carga_horaria_semanal_group" style="display:none;">
                    <label for="carga_horaria_semanal" class="form-label">
                        Carga Hor√°ria Semanal (informa√ß√£o):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Este campo ser√° preenchido automaticamente com base no tipo de jornada selecionado.</span>
                        </span>
                    </label>
                    <input type="text" id="carga_horaria_semanal" name="Carga Hor√°ria Semanal" class="form-input" readonly>
                    <span class="validation-icon" id="carga_horaria_semanal_icon"></span>
                </div>
                <div class="form-group" id="jornada_personalizada_group" style="display:none;">
                    <label for="jornada_personalizada" class="form-label">
                        Outra Jornada (especificar):
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Se a sua jornada n√£o se encaixa nas op√ß√µes, descreva-a aqui.</span>
                        </span>
                    </label>
                    <input type="text" id="jornada_personalizada" name="Jornada Personalizada" class="form-input">
                    <span class="validation-icon" id="jornada_personalizada_icon"></span>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="horario_inicio" class="form-label">
                            Hor√°rio Regular: Das
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de in√≠cio da sua jornada de trabalho di√°ria.</span>
                            </span>
                        </label>
                        <input type="time" id="horario_inicio" name="Hor√°rio In√≠cio Jornada" class="form-input" required>
                        <span class="validation-icon" id="horario_inicio_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="horario_fim" class="form-label">
                            √†s
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de t√©rmino da sua jornada de trabalho di√°ria.</span>
                            </span>
                        </label>
                        <input type="time" id="horario_fim" name="Hor√°rio Fim Jornada" class="form-input" required>
                        <span class="validation-icon" id="horario_fim_icon"></span>
                    </div>
                </div>
                <div class="two-column">
                    <div class="form-group">
                        <label for="intervalo_inicio" class="form-label">
                            Intervalo Obrigat√≥rio: Das
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de in√≠cio do seu intervalo para descanso/refei√ß√£o.</span>
                            </span>
                        </label>
                        <input type="time" id="intervalo_inicio" name="In√≠cio Intervalo" class="form-input">
                        <span class="validation-icon" id="intervalo_inicio_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="intervalo_fim" class="form-label">
                            √†s
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de t√©rmino do seu intervalo para descanso/refei√ß√£o.</span>
                            </span>
                        </label>
                        <input type="time" id="intervalo_fim" name="Fim Intervalo" class="form-input">
                        <span class="validation-icon" id="intervalo_fim_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="dias_trabalho" class="form-label">
                        Dias de Trabalho:
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione os dias da semana em que voc√™ trabalha.</span>
                        </span>
                    </label>
                    <select id="dias_trabalho" name="Dias de Trabalho" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="seg_sex">Segunda a Sexta</option><option value="seg_sab">Segunda a S√°bado</option><option value="plantao">Plant√£o</option><option value="escala">Escala</option><option value="outros_dias">Outros</option>
                    </select>
                    <span class="validation-icon" id="dias_trabalho_icon"></span>
                </div>
                <!-- New: Union Contribution Question -->
                <div class="form-group">
                    <label for="contribuinte_sindicato" class="form-label">
                        Voc√™ √© contribuinte de algum sindicato da categoria?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Informe se voc√™ contribui financeiramente para algum sindicato.</span>
                        </span>
                    </label>
                    <select id="contribuinte_sindicato" name="Contribuinte Sindicato" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="contribuinte_sindicato_icon"></span>
                </div>
                <!-- New: FGTS and INSS Questions -->
                <div class="form-group">
                    <label for="fgts_depositado" class="form-label">
                        A empresa est√° depositando o FGTS?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Verifique seu extrato do FGTS para confirmar os dep√≥sitos.</span>
                        </span>
                    </label>
                    <select id="fgts_depositado" name="FGTS Depositado" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                        <option value="nao_sei">N√ÉO SEI DIZER</option>
                    </select>
                    <span class="validation-icon" id="fgts_depositado_icon"></span>
                </div>
                <div class="form-group">
                    <label for="inss_descontado" class="form-label">
                        A empresa est√° descontando o INSS no seu holerite/contracheque?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Verifique se h√° desconto de INSS em seus recibos de pagamento.</span>
                        </span>
                    </label>
                    <select id="inss_descontado" name="INSS Descontado" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                        <option value="nao_sei">N√ÉO SEI DIZER</option>
                    </select>
                    <span class="validation-icon" id="inss_descontado_icon"></span>
                </div>
            </section>

            <section id="step-4" class="form-section">
                <h2 class="form-section-title">DESVIO DE FUN√á√ÉO</h2>
                <div class="form-group">
                    <label for="desvio_funcao_sim_nao" class="form-label">
                        Voc√™ j√° exerceu ou exerce fun√ß√µes diferentes daquelas para as quais foi contratado(a)?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se voc√™ realizou tarefas fora do seu contrato, "N√ÉO" caso contr√°rio.</span>
                        </span>
                    </label>
                    <select id="desvio_funcao_sim_nao" name="Desvio de Fun√ß√£o" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="desvio_funcao_sim_nao_icon"></span>
                </div>

                <div id="desvio_funcao_questions" style="display:none;">
                    <div class="form-group">
                        <label for="descricao_funcao_contratada" class="form-label">
                            Descri√ß√£o da fun√ß√£o para a qual foi contratado(a):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva as atividades que constam em seu contrato de trabalho.</span>
                            </span>
                        </label>
                        <textarea id="descricao_funcao_contratada" name="Fun√ß√£o Contratada" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="descricao_funcao_contratada_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="descricao_funcao_exercida" class="form-label">
                            Descri√ß√£o da(s) fun√ß√£o(√µes) que voc√™ realmente exercia:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Detalhe as atividades que voc√™ realmente realizava na pr√°tica.</span>
                            </span>
                        </label>
                        <textarea id="descricao_funcao_exercida" name="Fun√ß√£o Exercida" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="descricao_funcao_exercida_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="periodo_desvio_funcao" class="form-label">
                            Por qual per√≠odo exerceu essa(s) fun√ß√£o(√µes) desviada(s)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe o per√≠odo (in√≠cio e fim, se houver) em que voc√™ exerceu fun√ß√µes diferentes.</span>
                            </span>
                        </label>
                        <input type="text" id="periodo_desvio_funcao" name="Per√≠odo Desvio de Fun√ß√£o" placeholder="Ex: De MM/AAAA a MM/AAAA ou Desde MM/AAAA" class="form-input">
                        <span class="validation-icon" id="periodo_desvio_funcao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="solicitou_regularizacao" class="form-label">
                            Voc√™ solicitou a regulariza√ß√£o ou aumento salarial por essas fun√ß√µes?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Voc√™ pediu formalmente ou informalmente para que sua situa√ß√£o fosse regularizada?</span>
                            </span>
                        </label>
                        <select id="solicitou_regularizacao" name="Solicitou Regulariza√ß√£o Desvio" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                            <option value="nao_lembro">N√ÉO ME LEMBRO</option>
                        </select>
                        <span class="validation-icon" id="solicitou_regularizacao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="documentos_comprovacao" class="form-label">
                            Possui documentos que comprovem o desvio de fun√ß√£o (e-mails, mensagens, fotos, etc.)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se sim, prepare estes documentos para an√°lise.</span>
                            </span>
                        </label>
                        <input type="file" id="documentos_comprovacao" name="Documentos Desvio de Fun√ß√£o" class="form-input" multiple>
                        <span class="validation-icon" id="documentos_comprovacao_icon"></span>
                    </div>
                </div>
            </section>

            <section id="step-5" class="form-section">
                <h2 class="form-section-title">JORNADA DE TRABALHO E HORAS EXTRAS</h2>
                <div class="two-column">
                    <div class="form-group">
                        <label for="jornada_horario_inicio_prefilled" class="form-label">
                            Hor√°rio Regular: Das
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de in√≠cio da sua jornada (preenchido da se√ß√£o Contrato de Trabalho).</span>
                            </span>
                        </label>
                        <input type="time" id="jornada_horario_inicio_prefilled" name="Hor√°rio In√≠cio Jornada (Pr√©-preenchido)" class="form-input" readonly>
                        <span class="validation-icon" id="jornada_horario_inicio_prefilled_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="jornada_horario_fim_prefilled" class="form-label">
                            √†s
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de t√©rmino da sua jornada (preenchido da se√ß√£o Contrato de Trabalho).</span>
                            </span>
                        </label>
                        <input type="time" id="jornada_horario_fim_prefilled" name="Hor√°rio Fim Jornada (Pr√©-preenchido)" class="form-input" readonly>
                        <span class="validation-icon" id="jornada_horario_fim_prefilled_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="fazia_horas_extras" class="form-label">
                        Voc√™ fazia horas extras habitualmente?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se voc√™ realizava horas extras com frequ√™ncia, "N√ÉO" caso contr√°rio.</span>
                        </span>
                    </label>
                    <select id="fazia_horas_extras" name="Faz Horas Extras Habitualmente" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="fazia_horas_extras_icon"></span>
                </div>
                <div id="horas_extras_questions" style="display:none;">
                    <div class="form-group">
                        <label for="quantidade_horas_extras" class="form-label">
                            Em m√©dia, quantas horas extras por dia/semana?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe a quantidade m√©dia de horas extras que voc√™ fazia.</span>
                            </span>
                        </label>
                        <input type="text" id="quantidade_horas_extras" name="Quantidade Horas Extras" placeholder="Ex: 2h/dia ou 10h/semana" class="form-input">
                        <span class="validation-icon" id="quantidade_horas_extras_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="recebia_horas_extras" class="form-label">
                            Recebia pelas horas extras?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Selecione "SIM" se recebia o pagamento correto, "N√ÉO" se n√£o recebia ou "PARCIALMENTE" se recebia menos.</span>
                            </span>
                        </label>
                        <select id="recebia_horas_extras" name="Recebia Horas Extras" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                            <option value="parcialmente">PARCIALMENTE</option>
                        </select>
                        <span class="validation-icon" id="recebia_horas_extras_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="compensacao_horas_extras" class="form-label">
                            Se n√£o recebia, havia compensa√ß√£o em banco de horas ou folga?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se suas horas extras n√£o eram pagas, elas eram compensadas de alguma forma?</span>
                            </span>
                        </label>
                        <select id="compensacao_horas_extras" name="Compensa√ß√£o Horas Extras" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="compensacao_horas_extras_icon"></span>
                    </div>
                </div>
            </section>

            <section id="step-6" class="form-section">
                <h2 class="form-section-title">INTERVALOS E DESCANSOS</h2>
                <div class="two-column">
                    <div class="form-group">
                        <label for="intervalo_inicio_prefilled" class="form-label">
                            Intervalo Obrigat√≥rio: Das
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de in√≠cio do seu intervalo (preenchido da se√ß√£o Contrato de Trabalho).</span>
                            </span>
                        </label>
                        <input type="time" id="intervalo_inicio_prefilled" name="In√≠cio Intervalo (Pr√©-preenchido)" class="form-input" readonly>
                        <span class="validation-icon" id="intervalo_inicio_prefilled_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="intervalo_fim_prefilled" class="form-label">
                            √†s
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Hor√°rio de t√©rmino do seu intervalo (preenchido da se√ß√£o Contrato de Trabalho).</span>
                            </span>
                        </label>
                        <input type="time" id="intervalo_fim_prefilled" name="Fim Intervalo (Pr√©-preenchido)" class="form-input" readonly>
                        <span class="validation-icon" id="intervalo_fim_prefilled_icon"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="tirava_intervalo" class="form-label">
                        Voc√™ tirava seu intervalo de descanso/refei√ß√£o integralmente?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se voc√™ gozava do intervalo completo, "N√ÉO" se n√£o gozava.</span>
                        </span>
                    </label>
                    <select id="tirava_intervalo" name="Tirava Intervalo Integralmente" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                        <option value="parcialmente">PARCIALMENTE</option>
                    </select>
                    <span class="validation-icon" id="tirava_intervalo_icon"></span>
                </div>
                <div id="intervalo_questions" style="display:none;">
                    <div class="form-group">
                        <label for="motivo_nao_intervalo" class="form-label">
                            Qual o motivo de n√£o tirar o intervalo integralmente?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva por que voc√™ n√£o conseguia tirar o intervalo completo.</span>
                            </span>
                        </label>
                        <textarea id="motivo_nao_intervalo" name="Motivo N√£o Tirar Intervalo" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="motivo_nao_intervalo_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="folgas_feriados_trabalhados" class="form-label">
                            Trabalhava em folgas, feriados ou domingos?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Selecione "SIM" se voc√™ trabalhava em dias de folga, feriados ou domingos.</span>
                            </span>
                        </label>
                        <select id="folgas_feriados_trabalhados" name="Trabalhava em Folgas/Feriados" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="folgas_feriados_trabalhados_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="recebia_folgas_feriados" class="form-label">
                            Recebia pagamento em dobro ou folga compensat√≥ria?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se sim, descreva como era a compensa√ß√£o.</span>
                            </span>
                        </label>
                        <select id="recebia_folgas_feriados" name="Recebia Pagamento Folgas/Feriados" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="recebia_folgas_feriados_icon"></span>
                    </div>
                </div>
            </section>

            <section id="step-7" class="form-section">
                <h2 class="form-section-title">QUEST√ïES ESPECIAIS</h2>
                <div class="form-group">
                    <label for="afastado_inss" class="form-label">
                        Voc√™ j√° ficou afastado(a) pelo INSS (Aux√≠lio-Doen√ßa, Acidente de Trabalho, etc.)?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se voc√™ j√° teve algum afastamento coberto pelo INSS.</span>
                        </span>
                    </label>
                    <select id="afastado_inss" name="Afastado INSS" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="afastado_inss_icon"></span>
                </div>

                <div id="inss_sub_questions" style="display:none;">
                    <h3>Informa√ß√µes sobre Afastamento INSS:</h3>
                    <div class="form-group">
                        <label for="inss_ultimo_dia_trabalhado" class="form-label">
                            Qual foi o √∫ltimo dia trabalhado (D.U.T.)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Data do √∫ltimo dia em que voc√™ trabalhou antes do afastamento.</span>
                            </span>
                        </label>
                        <input type="date" id="inss_ultimo_dia_trabalhado" name="INSS √öltimo Dia Trabalhado" class="form-input">
                        <span class="validation-icon" id="inss_ultimo_dia_trabalhado_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_periodo_repouso_estimado" class="form-label">
                            O per√≠odo estimado de repouso necess√°rio:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Per√≠odo de afastamento recomendado pelo m√©dico.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_periodo_repouso_estimado" name="INSS Per√≠odo Repouso Estimado" placeholder="Ex: 30 dias, 6 meses" class="form-input">
                        <span class="validation-icon" id="inss_periodo_repouso_estimado_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_documento_medico_contem" class="form-label">
                            O documento do m√©dico cont√©m:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Verifique se o atestado m√©dico possui assinatura, carimbo e n√∫mero de registro do profissional.</span>
                            </span>
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="doc_medico_assinatura_carimbo" name="INSS Documento M√©dico: Assinatura/Carimbo" value="sim">
                                <label for="doc_medico_assinatura_carimbo">Assinatura e carimbo do profissional com CRM, CRO ou RMS (A assinatura pode ser eletr√¥nica)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="doc_medico_informacoes_doenca" name="INSS Documento M√©dico: Informa√ß√µes Doen√ßa" value="sim">
                                <label for="doc_medico_informacoes_doenca">As informa√ß√µes sobre a doen√ßa ou CID</label>
                            </div>
                        </div>
                    </div>

                    <h3>Informa√ß√µes sobre o Benef√≠cio Requerido:</h3>
                    <div class="form-group">
                        <label for="inss_tipo_beneficio" class="form-label">
                            Tipo de benef√≠cio solicitado:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Selecione o tipo de benef√≠cio do INSS que foi solicitado.</span>
                            </span>
                        </label>
                        <select id="inss_tipo_beneficio" name="INSS Tipo Benef√≠cio Solicitado" class="form-select">
                            <option value="">Selecione</option>
                            <option value="auxilio_doenca_acidentario">Aux√≠lio-doen√ßa acident√°rio (B91)</option>
                            <option value="auxilio_doenca_comum">Aux√≠lio-doen√ßa comum</option>
                            <option value="outro_beneficio">Outro</option>
                        </select>
                        <span class="validation-icon" id="inss_tipo_beneficio_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_data_inicio_incapacidade" class="form-label">
                            Data de in√≠cio da incapacidade (primeiro dia de incapacidade para o trabalho):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Data em que a incapacidade para o trabalho come√ßou.</span>
                            </span>
                        </label>
                        <input type="date" id="inss_data_inicio_incapacidade" name="INSS Data In√≠cio Incapacidade" class="form-input">
                        <span class="validation-icon" id="inss_data_inicio_incapacidade_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_incapacidade_permanente_temporaria" class="form-label">
                            Se a incapacidade √© permanente ou tempor√°ria:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Indique se a sua incapacidade √© permanente ou se tem previs√£o de melhora.</span>
                            </span>
                        </label>
                        <select id="inss_incapacidade_permanente_temporaria" name="INSS Incapacidade Permanente/Tempor√°ria" class="form-select">
                            <option value="">Selecione</option>
                            <option value="permanente">Permanente</option>
                            <option value="temporaria">Tempor√°ria</option>
                        </select>
                        <span class="validation-icon" id="inss_incapacidade_permanente_temporaria_icon"></span>
                    </div>
                    <div class="form-group" id="inss_acidente_trabalho_date_group" style="display:none;">
                        <label for="inss_data_acidente_trabalho" class="form-label">
                            Data do acidente de trabalho (para benef√≠cios relacionados a acidente de trabalho):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Data em que o acidente de trabalho ocorreu.</span>
                            </span>
                        </label>
                        <input type="date" id="inss_data_acidente_trabalho" name="INSS Data Acidente Trabalho" class="form-input">
                        <span class="validation-icon" id="inss_data_acidente_trabalho_icon"></span>
                    </div>
                    <div class="form-group" id="inss_descricao_acidente_trabalho_group" style="display:none;">
                        <label for="inss_descricao_acidente_trabalho" class="form-label">
                            Descri√ß√£o do acidente de trabalho: Como ocorreu o acidente? Onde ocorreu? Quais as consequ√™ncias do acidente?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva detalhadamente como, onde e quais foram as consequ√™ncias do acidente.</span>
                            </span>
                        </label>
                        <textarea id="inss_descricao_acidente_trabalho" name="INSS Descri√ß√£o Acidente Trabalho" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_descricao_acidente_trabalho_icon"></span>
                    </div>
                    <div class="form-group" id="inss_cat_group" style="display:none;">
                        <label for="inss_existencia_cat" class="form-label">
                            Exist√™ncia de registro de acidente de trabalho (CAT - Comunica√ß√£o de Acidente de Trabalho): O acidente foi registrado por meio da CAT? Se sim, apresentar o n√∫mero.
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe se a Comunica√ß√£o de Acidente de Trabalho (CAT) foi registrada e, se sim, qual o n√∫mero.</span>
                            </span>
                        </label>
                        <select id="inss_existencia_cat" name="INSS Exist√™ncia CAT" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="inss_existencia_cat_icon"></span>
                    </div>
                    <div class="form-group" id="inss_cat_number_group" style="display:none;">
                        <label for="inss_numero_cat" class="form-label">
                            N√∫mero da CAT:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se a CAT foi registrada, informe o n√∫mero.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_numero_cat" name="INSS N√∫mero CAT" class="form-input">
                        <span class="validation-icon" id="inss_numero_cat_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_pedido_beneficio_anterior" class="form-label">
                            Se j√° houve algum pedido de benef√≠cio anterior relacionado ao acidente ou √† doen√ßa:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Voc√™ j√° solicitou algum benef√≠cio ao INSS por este mesmo problema de sa√∫de?</span>
                            </span>
                        </label>
                        <select id="inss_pedido_beneficio_anterior" name="INSS Pedido Benef√≠cio Anterior" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="inss_pedido_beneficio_anterior_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_afastamento_anterior" class="form-label">
                            Se houve afastamento anterior relacionado ao mesmo problema de sa√∫de (doen√ßa ou acidente):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Voc√™ j√° se afastou do trabalho anteriormente devido ao mesmo problema de sa√∫de?</span>
                            </span>
                        </label>
                        <select id="inss_afastamento_anterior" name="INSS Afastamento Anterior" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="inss_afastamento_anterior_icon"></span>
                    </div>

                    <h3>Informa√ß√µes sobre o Trabalho e a Atividade Exercida:</h3>
                    <div class="form-group">
                        <label for="inss_funcao_exercida" class="form-label">
                            Fun√ß√£o exercida no momento do acidente ou in√≠cio da incapacidade:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Seu cargo ou fun√ß√£o no momento em que a incapacidade come√ßou.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_funcao_exercida" name="INSS Fun√ß√£o Exercida" class="form-input">
                        <span class="validation-icon" id="inss_funcao_exercida_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_atividade_realizada" class="form-label">
                            Atividade realizada no momento do acidente (detalhamento das tarefas e responsabilidades):
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva as tarefas e responsabilidades que voc√™ estava executando no momento do acidente.</span>
                            </span>
                        </label>
                        <textarea id="inss_atividade_realizada" name="INSS Atividade Realizada" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_atividade_realizada_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_empregador" class="form-label">
                            Empregador/empresa em que o requerente trabalhava na data do acidente ou in√≠cio da incapacidade:
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Nome da empresa em que voc√™ trabalhava quando a incapacidade come√ßou.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_empregador" name="INSS Empregador" class="form-input">
                        <span class="validation-icon" id="inss_empregador_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_dias_afastamento" class="form-label">
                            N√∫mero de dias de afastamento do trabalho: Quanto tempo o trabalhador ficou afastado ap√≥s o acidente ou in√≠cio da incapacidade?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe o total de dias que voc√™ ficou afastado do trabalho.</span>
                            </span>
                        </label>
                        <input type="number" id="inss_dias_afastamento" name="INSS Dias Afastamento" class="form-input" min="0">
                        <span class="validation-icon" id="inss_dias_afastamento_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_medidas_seguranca" class="form-label">
                            Ado√ß√£o de medidas de seguran√ßa e preven√ß√£o: O trabalhador usava Equipamento de Prote√ß√£o Individual (EPI) no momento do acidente? Houve falha na seguran√ßa do trabalho?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva sobre o uso de EPIs e se houve falhas de seguran√ßa no momento do acidente.</span>
                            </span>
                        </label>
                        <textarea id="inss_medidas_seguranca" name="INSS Medidas Seguran√ßa" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_medidas_seguranca_icon"></span>
                    </div>

                    <h3>Informa√ß√µes M√©dicas e de Sa√∫de:</h3>
                    <div class="form-group">
                        <label for="inss_doenca_lesao" class="form-label">
                            Doen√ßa ou les√£o resultante do acidente de trabalho: Qual a condi√ß√£o de sa√∫de diagnosticada?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva a doen√ßa ou les√£o diagnosticada decorrente do acidente ou condi√ß√£o de sa√∫de.</span>
                            </span>
                        </label>
                        <textarea id="inss_doenca_lesao" name="INSS Doen√ßa/Les√£o" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_doenca_lesao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_laudos_medicos" class="form-label">
                            Laudos m√©dicos: O INSS solicitar√° laudos e exames que comprovem a incapacidade tempor√°ria para o trabalho. Isso inclui os laudos m√©dicos de hospitais ou m√©dicos que trataram o acidente ou a doen√ßa.
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Liste os laudos e exames m√©dicos que comprovam sua incapacidade.</span>
                            </span>
                        </label>
                        <textarea id="inss_laudos_medicos" name="INSS Laudos M√©dicos" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_laudos_medicos_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_historico_tratamento" class="form-label">
                            Hist√≥rico de tratamento: O trabalhador recebeu algum tipo de tratamento m√©dico ap√≥s o acidente ou durante o afastamento?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva os tratamentos m√©dicos que voc√™ recebeu.</span>
                            </span>
                        </label>
                        <textarea id="inss_historico_tratamento" name="INSS Hist√≥rico Tratamento" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_historico_tratamento_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_codigos_cid" class="form-label">
                            C√≥digos de CID (Classifica√ß√£o Internacional de Doen√ßas): O trabalhador deve fornecer o c√≥digo da doen√ßa ou les√£o, que pode ser inclu√≠do no laudo m√©dico.
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe os c√≥digos CID relacionados √† sua doen√ßa ou les√£o, se souber.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_codigos_cid" name="INSS C√≥digos CID" class="form-input">
                        <span class="validation-icon" id="inss_codigos_cid_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_capacidade_laborativa" class="form-label">
                            Capacidade para exercer atividades laborativas: O m√©dico do INSS ou o m√©dico assistente precisa determinar se o trabalhador tem condi√ß√µes de retornar ao trabalho ou se a incapacidade persiste.
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Qual a avalia√ß√£o m√©dica sobre sua capacidade de retornar ao trabalho?</span>
                            </span>
                        </label>
                        <textarea id="inss_capacidade_laborativa" name="INSS Capacidade Laborativa" rows="3" class="form-textarea"></textarea>
                        <span class="validation-icon" id="inss_capacidade_laborativa_icon"></span>
                    </div>

                    <h3 id="inss_detalhes_acidente_title" style="display:none;">Detalhamento do Acidente de Trabalho:</h3>
                    <div id="inss_detalhes_acidente_questions" style="display:none;">
                        <div class="form-group">
                            <label for="inss_descricao_detalhada_acidente" class="form-label">
                                Descri√ß√£o detalhada do acidente: Como e quando o acidente ocorreu?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Detalhe como e quando o acidente ocorreu.</span>
                                </span>
                            </label>
                            <textarea id="inss_descricao_detalhada_acidente" name="INSS Descri√ß√£o Detalhada Acidente" rows="3" class="form-textarea"></textarea>
                            <span class="validation-icon" id="inss_descricao_detalhada_acidente_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="inss_local_acidente" class="form-label">
                                Local do acidente: Onde o acidente aconteceu (na empresa, no trajeto entre a resid√™ncia e o trabalho, etc.)?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Informe o local exato onde o acidente de trabalho aconteceu.</span>
                                </span>
                            </label>
                            <input type="text" id="inss_local_acidente" name="INSS Local Acidente" class="form-input">
                            <span class="validation-icon" id="inss_local_acidente_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="inss_causas_acidente" class="form-label">
                                Causas do acidente: Foi uma falha na empresa, em equipamentos ou por culpa do trabalhador?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Descreva as poss√≠veis causas do acidente.</span>
                                </span>
                            </label>
                            <textarea id="inss_causas_acidente" name="INSS Causas Acidente" rows="3" class="form-textarea"></textarea>
                            <span class="validation-icon" id="inss_causas_acidente_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="inss_tipo_lesao" class="form-label">
                                Tipo de les√£o ou dano causado: O que foi afetado pelo acidente (ossos, tecidos, √≥rg√£os, etc.)?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Descreva a natureza da les√£o causada pelo acidente.</span>
                                </span>
                            </label>
                            <textarea id="inss_tipo_lesao" name="INSS Tipo Les√£o" rows="3" class="form-textarea"></textarea>
                            <span class="validation-icon" id="inss_tipo_lesao_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="inss_tratamento_imediato" class="form-label">
                                Se houve tratamento m√©dico imediato: O trabalhador foi imediatamente atendido ap√≥s o acidente? Onde ocorreu o atendimento?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Informe se voc√™ recebeu atendimento m√©dico logo ap√≥s o acidente e onde.</span>
                                </span>
                            </label>
                            <textarea id="inss_tratamento_imediato" name="INSS Tratamento Imediato" rows="3" class="form-textarea"></textarea>
                            <span class="validation-icon" id="inss_tratamento_imediato_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="inss_sequelas" class="form-label">
                                Se h√° sequelas do acidente: O acidente resultou em sequelas permanentes?
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Indique se o acidente deixou alguma sequela permanente.</span>
                                </span>
                            </label>
                            <select id="inss_sequelas" name="INSS Sequela Acidente" class="form-select">
                                <option value="">Selecione</option>
                                <option value="sim">SIM</option>
                                <option value="nao">N√ÉO</option>
                            </select>
                            <span class="validation-icon" id="inss_sequelas_icon"></span>
                        </div>
                    </div>

                    <h3>Hist√≥rico de Contribui√ß√µes ao INSS:</h3>
                    <div class="form-group">
                        <label for="inss_tempo_contribuicao" class="form-label">
                            Tempo de contribui√ß√£o: O trabalhador possui contribui√ß√µes suficientes para ter direito ao benef√≠cio?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe seu tempo total de contribui√ß√£o ao INSS.</span>
                            </span>
                        </label>
                        <input type="text" id="inss_tempo_contribuicao" name="INSS Tempo Contribui√ß√£o" placeholder="Ex: 5 anos, 3 meses" class="form-input">
                        <span class="validation-icon" id="inss_tempo_contribuicao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="inss_ultima_contribuicao" class="form-label">
                            Qual a √∫ltima contribui√ß√£o realizada antes do acidente ou in√≠cio da incapacidade?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Data da sua √∫ltima contribui√ß√£o ao INSS antes do problema de sa√∫de.</span>
                            </span>
                        </label>
                        <input type="date" id="inss_ultima_contribuicao" name="INSS √öltima Contribui√ß√£o" class="form-input">
                        <span class="validation-icon" id="inss_ultima_contribuicao_icon"></span>
                    </div>
                </div>
            </section>

            <!-- New: Maternity Questions Section -->
            <section id="step-8" class="form-section">
                <h2 class="form-section-title">QUEST√ïES RELACIONADAS √Ä MATERNIDADE</h2>
                <div class="form-group">
                    <label for="esta_gravida" class="form-label">
                        Voc√™ est√° gr√°vida atualmente?
                        <span class="tooltip-container">
                            <i class="fas fa-info-circle"></i>
                            <span class="tooltip-text">Selecione "SIM" se voc√™ estiver gr√°vida.</span>
                        </span>
                    </label>
                    <select id="esta_gravida" name="Est√° Gr√°vida" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="sim">SIM</option>
                        <option value="nao">N√ÉO</option>
                    </select>
                    <span class="validation-icon" id="esta_gravida_icon"></span>
                </div>

                <div id="gravidez_questions" style="display:none;">
                    <div class="form-group">
                        <label for="data_provavel_parto" class="form-label">
                            Qual a data prov√°vel do parto (DPP)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe a data estimada para o nascimento do beb√™.</span>
                            </span>
                        </label>
                        <input type="date" id="data_provavel_parto" name="Data Prov√°vel Parto" class="form-input">
                        <span class="validation-icon" id="data_provavel_parto_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="acompanhamento_prenatal" class="form-label">
                            Voc√™ est√° realizando acompanhamento pr√©-natal? Se sim, possui atestados m√©dicos ou comprovantes das consultas?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva seu acompanhamento e a disponibilidade de documentos.</span>
                            </span>
                        </label>
                        <textarea id="acompanhamento_prenatal" name="Acompanhamento Pr√©-Natal" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="acompanhamento_prenatal_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="previsao_licenca_maternidade" class="form-label">
                            Voc√™ j√° tem previs√£o de quando pretende iniciar sua licen√ßa-maternidade?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Informe a data estimada para o in√≠cio da licen√ßa.</span>
                            </span>
                        </label>
                        <input type="date" id="previsao_licenca_maternidade" name="Previs√£o Licen√ßa Maternidade" class="form-input">
                        <span class="validation-icon" id="previsao_licenca_maternidade_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="intervalos_amamentacao" class="form-label">
                            Ap√≥s o retorno da licen√ßa-maternidade, voc√™ pretende usufruir dos intervalos para amamenta√ß√£o previstos em lei?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Selecione "SIM" se pretende utilizar esses intervalos.</span>
                            </span>
                        </label>
                        <select id="intervalos_amamentacao" name="Pretende Intervalos Amamenta√ß√£o" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="intervalos_amamentacao_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="restricoes_medicas_gravidez" class="form-label">
                            H√° alguma restri√ß√£o m√©dica ou necessidade de adapta√ß√£o na sua fun√ß√£o ou ambiente de trabalho devido √† gravidez?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Descreva quaisquer restri√ß√µes ou necessidades espec√≠ficas.</span>
                            </span>
                        </label>
                        <textarea id="restricoes_medicas_gravidez" name="Restri√ß√µes M√©dicas Gravidez" rows="2" class="form-textarea"></textarea>
                        <span class="validation-icon" id="restricoes_medicas_gravidez_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="conhecimento_estabilidade_gestante" class="form-label">
                            Voc√™ tem conhecimento sobre a estabilidade provis√≥ria da gestante no emprego, conforme a legisla√ß√£o trabalhista?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Confirme seu conhecimento sobre este direito.</span>
                            </span>
                        </label>
                        <select id="conhecimento_estabilidade_gestante" name="Conhecimento Estabilidade Gestante" class="form-select">
                            <option value="">Selecione</option>
                            <option value="sim">SIM</option>
                            <option value="nao">N√ÉO</option>
                        </select>
                        <span class="validation-icon" id="conhecimento_estabilidade_gestante_icon"></span>
                    </div>
                    <div class="form-group">
                        <label for="documentos_gravidez" class="form-label">
                            Voc√™ possui documentos que comprovem a gravidez (ex: ultrassom, atestado m√©dico de gravidez)?
                            <span class="tooltip-container">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltip-text">Se sim, prepare estes documentos para an√°lise.</span>
                            </span>
                        </label>
                        <input type="file" id="documentos_gravidez" name="Documentos Gravidez" class="form-input" multiple>
                        <span class="validation-icon" id="documentos_gravidez_icon"></span>
                    </div>
                </div>
            </section>
            <!-- End: Maternity Questions Section -->

            <section id="step-9" class="form-section">
                <h2 class="form-section-title">TESTEMUNHAS</h2>
                <div class="form-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="no_witnesses" name="N√£o Tenho Testemunhas" value="sim">
                        <label for="no_witnesses" class="form-label">N√ÉO TENHO TESTEMUNHAS</label>
                    </div>
                </div>
                <div id="witness_details_group">
                    <p class="text-gray-700 mb-4">Caso possua, forne√ßa os dados da(s) testemunha(s) que presenciaram os fatos:</p>
                    <div class="witness-block border p-4 rounded-lg mb-4">
                        <h3 class="font-semibold text-lg mb-2">Testemunha 1</h3>
                        <div class="form-group">
                            <label for="testemunha1_nome" class="form-label">
                                Nome Completo:
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Nome completo da primeira testemunha.</span>
                                </span>
                            </label>
                            <input type="text" id="testemunha1_nome" name="Testemunha 1 Nome" class="form-input">
                            <span class="validation-icon" id="testemunha1_nome_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="testemunha1_cpf" class="form-label">
                                CPF:
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">CPF da primeira testemunha.</span>
                                </span>
                            </label>
                            <input type="text" id="testemunha1_cpf" name="Testemunha 1 CPF" placeholder="000.000.000-00" class="form-input mask-cpf">
                            <span class="validation-icon" id="testemunha1_cpf_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="testemunha1_telefone" class="form-label">
                                Telefone:
                                <span class="tooltip-container">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltip-text">Telefone da primeira testemunha, com DDD.</span>
                                </span>
                            </label>
                            <input type="tel" id="testemunha1_telefone" name="Testemunha 1 Telefone" placeholder="(DD) 9XXXX-XXXX" class="form-input mask-phone">
                            <span class="validation-icon" id="testemunha1_telefone_icon"></span>
                        </div>
                    </div>

                    <div class="witness-block border p-4 rounded-lg mb-4">
                        <h3 class="font-semibold text-lg mb-2">Testemunha 2</h3>
                        <div class="form-group">
                            <label for="testemunha2_nome" class="form-label">Nome Completo:</label>
                            <input type="text" id="testemunha2_nome" name="Testemunha 2 Nome" class="form-input">
                            <span class="validation-icon" id="testemunha2_nome_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="testemunha2_cpf" class="form-label">CPF:</label>
                            <input type="text" id="testemunha2_cpf" name="Testemunha 2 CPF" placeholder="000.000.000-00" class="form-input mask-cpf">
                            <span class="validation-icon" id="testemunha2_cpf_icon"></span>
                        </div>
                        <div class="form-group">
                            <label for="testemunha2_telefone" class="form-label">Telefone:</label>
                            <input type="tel" id="testemunha2_telefone" name="Testemunha 2 Telefone" placeholder="(DD) 9XXXX-XXXX" class="form-input mask-phone">
                            <span class="validation-icon" id="testemunha2_telefone_icon"></span>
                        </div>
                    </div>

                    </div>
            </section>

            <section id="step-10" class="form-section">
                <h2 class="form-section-title">DOCUMENTOS QUE O CLIENTE PODE ENVIAR</h2>
                <p class="text-gray-700 mb-4">Para darmos andamento ao seu caso, por favor, prepare os seguintes documentos, se os possuir:</p>
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                    <li>Documento de identidade (RG, CNH)</li>
                    <li>CPF</li>
                    <li>Comprovante de resid√™ncia atualizado</li>
                    <li>Carteira de Trabalho (CTPS) - P√°ginas de identifica√ß√£o, contrato de trabalho, anota√ß√µes de f√©rias e sal√°rio</li>
                    <li>Holerites/Recibos de pagamento (dos √∫ltimos 12 meses, se poss√≠vel)</li>
                    <li>Extrato do FGTS</li>
                    <li>Extrato ou chave de saque do PIS/PASEP</li>
                    <li>Termo de Rescis√£o de Contrato de Trabalho (TRCT) e Comprovante de Seguro-Desemprego (se aplic√°vel)</li>
                    <li>Atestados m√©dicos e laudos (especialmente se relacionado a afastamento ou doen√ßa)</li>
                    <li>Comunica√ß√£o de Acidente de Trabalho (CAT) - se aplic√°vel</li>
                    <li>Documentos que comprovem desvio de fun√ß√£o (e-mails, mensagens, fotos, etc.) - se aplic√°vel</li>
                    <li>Outros documentos relevantes ao seu caso (como registros de ponto, correspond√™ncias da empresa, etc.)</li>
                    <li>Para gestantes: Ultrassom, atestado m√©dico de gravidez, comprovantes de pr√©-natal (se aplic√°vel)</li>
                    <li>Para servidores p√∫blicos: Termo de posse, comprovante de regime jur√≠dico, edital do concurso (se aplic√°vel)</li>
                </ul>
                <div class="form-group mt-6">
                    <label for="documentos_anexo" class="form-label">Anexar Documentos (opcional):</label>
                    <input type="file" id="documentos_anexo" name="Documentos Anexados" class="form-input" multiple>
                    <span class="validation-icon" id="documentos_anexo_icon"></span>
                </div>
            </section>

            <section id="step-11" class="form-section">
                <h2 class="form-section-title">FINALIZA√á√ÉO</h2>
                <div class="form-group text-center">
                    <p class="text-gray-700 text-lg mb-6">
                        Voc√™ est√° quase l√°! Ao clicar em "Enviar Formul√°rio", suas informa√ß√µes ser√£o enviadas para a an√°lise de nossa equipe jur√≠dica.
                        Agradecemos por preencher o formul√°rio. Entraremos em contato em breve!
                    </p>
                </div>
                <div id="selfieContainer" class="mb-6">
                    <label class="form-label">Tirar Selfie (Opcional):</label>
                    <video id="selfieVideo" autoplay style="display:none;"></video>
                    <canvas id="selfieCanvas" style="display:none;"></canvas>
                    <input type="hidden" id="selfieDataInput" name="Selfie Data">
                    <div class="flex justify-center space-x-4 mt-4">
                        <button type="button" id="takeSelfieBtn" class="btn btn-primary"><i class="fas fa-camera mr-2"></i>Tirar Selfie</button>
                        <input type="file" id="uploadSelfieInput" accept="image/*" style="display:none;">
                        <button type="button" id="uploadSelfieBtn" class="btn btn-secondary"><i class="fas fa-upload mr-2"></i>Escolher Arquivo</button>
                        <button type="button" id="retakeSelfieBtn" class="btn btn-secondary hidden"><i class="fas fa-redo mr-2"></i>Retirar Selfie</button>
                    </div>
                </div>
            </section>

            <!-- New: Probability Meter Section -->
            <section id="step-12" class="probability-section">
                <div class="probability-loading-overlay" id="probabilityLoadingOverlay">
                    <div class="diagonal-progress-bar"></div>
                    <p>Analisando dados...</p>
                </div>

                <div class="header">
                    <h1 class="title">‚öñÔ∏è An√°lise de Caso Trabalhista</h1>
                    <p class="subtitle">Avalie a probabilidade de √™xito do seu caso</p>
                </div>

                <div class="probability-gauge">
                    <svg class="gauge-bg" viewBox="0 0 200 120">
                        <defs>
                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#ff4757"/>
                                <stop offset="50%" style="stop-color:#ffa502"/>
                                <stop offset="100%" style="stop-color:#2ed573"/>
                            </linearGradient>
                        </defs>
                        <path class="gauge-arc gauge-bg-arc"
                                d="M 20 100 A 80 80 0 0 1 180 100" />
                        <path class="gauge-arc gauge-fill" id="gaugeFill"
                                d="M 20 100 A 80 80 0 0 1 180 100" />
                    </svg>
                    <div class="gauge-needle" id="gaugeNeedle"></div>
                    <div class="gauge-center"></div>
                    <div class="gauge-labels">
                        <div class="gauge-label label-low">Baixa</div>
                        <div class="gauge-label label-medium">M√©dia</div>
                        <div class="gauge-label label-high">Alta</div>
                    </div>
                </div>

                <div class="probability-display">
                    <div class="probability-value" id="probabilityValue">0%</div>
                    <div class="probability-text" id="probabilityText">CALCULANDO...</div>
                </div>

                <div class="risk-analysis" id="riskAnalysis">
                    <div class="risk-title">An√°lise de Fatores</div>
                    <div class="risk-factors" id="riskFactors">
                        Preencha o formul√°rio para ver a an√°lise detalhada dos fatores que influenciam seu caso.
                    </div>
                </div>

                <!-- Hidden inputs for probability calculation based on main form answers -->
                <div class="hidden-probability-question">
                    <input type="radio" name="prob_demissao" id="prob_demissao_sim" data-score="20">
                    <input type="radio" name="prob_demissao" id="prob_demissao_nao" data-score="0">
                </div>
                <div class="hidden-probability-question">
                    <input type="radio" name="prob_registro" id="prob_registro_clt" data-score="15">
                    <input type="radio" name="prob_registro" id="prob_registro_parcial" data-score="10">
                    <input type="radio" name="prob_registro" id="prob_registro_nao" data-score="5">
                </div>
                <div class="hidden-probability-question">
                    <input type="radio" name="prob_testemunhas" id="prob_testemunhas_muitas" data-score="20">
                    <input type="radio" name="prob_testemunhas" id="prob_testemunhas_poucas" data-score="15">
                    <input type="radio" name="prob_testemunhas" id="prob_testemunhas_nenhuma" data-score="0">
                </div>
                <div class="hidden-probability-question">
                    <input type="radio" name="prob_horas_extras" id="prob_horas_extras_sim_comprovadas" data-score="25">
                    <input type="radio" name="prob_horas_extras" id="prob_horas_extras_sim_sem_comprovacao" data-score="10">
                    <input type="radio" name="prob_horas_extras" id="prob_horas_extras_nao" data-score="0">
                </div>
                <div class="hidden-probability-question">
                    <input type="radio" name="prob_documentos" id="prob_documentos_sim" data-score="20">
                    <input type="radio" name="prob_documentos" id="prob_documentos_nao" data-score="5">
                </div>
            </section>

            <div class="navigation-buttons">
                <button type="button" id="prevBtn" class="btn btn-secondary"><i class="fas fa-arrow-left mr-2"></i>Voltar</button>
                <button type="button" id="nextBtn" class="btn btn-primary">Pr√≥ximo<i class="fas fa-arrow-right ml-2"></i></button>
                <button type="button" id="printBtn" class="btn btn-secondary"><i class="fas fa-print mr-2"></i>VISUALIZAR</button>
                <button type="submit" id="submitBtn" class="btn btn-submit hidden">Enviar Formul√°rio<i class="fas fa-paper-plane ml-2"></i></button>
            </div>
        </form>
    </div>

    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title text-green-600">Mensagem do Formul√°rio</h3>
            <p class="modal-message">Conte√∫do da mensagem.</p>
            <div class="modal-buttons">
                <button id="closeModalBtn" class="btn btn-primary">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        const sections = document.querySelectorAll('.form-section, .probability-section'); // Include new section
        const progressBarFill = document.getElementById('progressBarFill');
        const sectionIndicator = document.getElementById('sectionIndicator');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const laborForm = document.getElementById('laborForm');
        const successModal = document.getElementById('successModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const printBtn = document.getElementById('printBtn');
        const probabilityLoadingOverlay = document.getElementById('probabilityLoadingOverlay');

        let currentStep = 0;
        const sectionTitles = [
            "DADOS PESSOAIS DO CLIENTE",
            "DADOS DA EMPRESA/EMPREGADOR",
            "DADOS DO CONTRATO DE TRABALHO",
            "DESVIO DE FUN√á√ÉO",
            "JORNADA DE TRABALHO E HORAS EXTRAS",
            "INTERVALOS E DESCANSOS",
            "QUEST√ïES ESPECIAIS",
            "QUEST√ïES RELACIONADAS √Ä MATERNIDADE",
            "TESTEMUNHAS",
            "DOCUMENTOS QUE O CLIENTE PODE ENVIAR",
            "FINALIZA√á√ÉO",
            "AN√ÅLISE DE CASO TRABALHISTA" // New section title
        ];

        // Function to update progress bar and section indicator
        function updateProgressBar() {
            const totalSections = sections.length;
            const progress = (currentStep / (totalSections - 1)) * 100;
            progressBarFill.style.width = `${progress}%`;
            
            let indicatorText = "";
            for (let i = 0; i <= currentStep; i++) {
                indicatorText += sectionTitles[i];
                if (i < currentStep) {
                    indicatorText += " > ";
                }
            }
            sectionIndicator.textContent = indicatorText;
        }

        // Function to show a specific section
        function showSection(step) {
            // Remove striped class from progress bar when changing section
            progressBarFill.classList.remove('striped');

            sections.forEach((section, index) => {
                section.classList.remove('active');
                if (index === step) {
                    section.classList.add('active');
                }
            });
            currentStep = step;
            updateProgressBar();
            updateNavigationButtons();
            validateCurrentSectionRealTime();

            // Special handling for the probability meter section
            if (currentStep === sections.length - 1) { // If it's the last step (probability meter)
                probabilityLoadingOverlay.classList.remove('hidden'); // Show loading overlay
                setTimeout(() => {
                    probabilityLoadingOverlay.classList.add('hidden'); // Hide loading overlay
                    updateProbabilityMeter(); // Then update the meter
                }, 2000); // 2-second loading animation
            } else {
                probabilityLoadingOverlay.classList.add('hidden'); // Ensure hidden if not on probability section
            }
        }

        // Function to update navigation buttons visibility
        function updateNavigationButtons() {
            prevBtn.classList.toggle('hidden', currentStep === 0);
            nextBtn.classList.toggle('hidden', currentStep === sections.length - 1);
            submitBtn.classList.toggle('hidden', currentStep !== sections.length - 2); // Submit is before probability meter
            printBtn.classList.toggle('hidden', currentStep !== sections.length - 1); // Print on probability meter step
        }

        // Function to validate fields in the current section
        function validateCurrentSection() {
            const currentSection = sections[currentStep];
            const inputs = currentSection.querySelectorAll('input[required]:not([style*="display: none"]), select[required]:not([style*="display: none"]), textarea[required]:not([style*="display: none"])');
            let allValid = true;

            inputs.forEach(input => {
                // Check if the input is visible before validating
                if (input.offsetParent !== null) {
                    if (input.type === 'file') {
                        if (input.files.length === 0) {
                            input.classList.add('invalid', 'highlight-invalid');
                            allValid = false;
                        } else {
                            input.classList.remove('invalid', 'highlight-invalid');
                            input.classList.add('valid');
                        }
                    } else if (!input.value.trim()) {
                        input.classList.add('invalid', 'highlight-invalid');
                        allValid = false;
                    } else {
                        input.classList.remove('invalid', 'highlight-invalid');
                        input.classList.add('valid');
                    }
                }
            });
            return allValid;
        }

        // Function to set up real-time validation for inputs in the current section
        function validateCurrentSectionRealTime() {
            const currentSection = sections[currentStep];
            const inputs = currentSection.querySelectorAll('input, select, textarea');

            inputs.forEach(input => {
                input.removeEventListener('input', inputValidationHandler);
                input.removeEventListener('change', inputValidationHandler);

                input.addEventListener('input', inputValidationHandler);
                input.addEventListener('change', inputValidationHandler);
                inputValidationHandler({ target: input });
            });
        }

        // Handles validation for a single input
        function inputValidationHandler(event) {
            const input = event.target;
            const iconId = input.id + '_icon';
            const validationIcon = document.getElementById(iconId);

            const isVisible = input.offsetParent !== null;
            const isRequired = input.hasAttribute('required');

            if (isRequired && isVisible) {
                if (input.type === 'file') {
                    if (input.files.length === 0) {
                        input.classList.remove('valid');
                        input.classList.add('invalid', 'highlight-invalid');
                        if (validationIcon) {
                            validationIcon.classList.remove('fa-check-circle', 'text-green-500');
                            validationIcon.classList.add('fa-exclamation-circle', 'text-red-500');
                        }
                    } else {
                        input.classList.remove('invalid', 'highlight-invalid');
                        input.classList.add('valid');
                        if (validationIcon) {
                            validationIcon.classList.remove('fa-exclamation-circle', 'text-red-500');
                            validationIcon.classList.add('fa-check-circle', 'text-green-500');
                        }
                    }
                } else if (!input.value.trim()) {
                    input.classList.remove('valid');
                    input.classList.add('invalid', 'highlight-invalid');
                    if (validationIcon) {
                        validationIcon.classList.remove('fa-check-circle', 'text-green-500');
                        validationIcon.classList.add('fa-exclamation-circle', 'text-red-500');
                    }
                } else {
                    input.classList.remove('invalid', 'highlight-invalid');
                    input.classList.add('valid');
                    if (validationIcon) {
                        validationIcon.classList.remove('fa-exclamation-circle', 'text-red-500');
                        validationIcon.classList.add('fa-check-circle', 'text-green-500');
                    }
                }
            } else {
                input.classList.remove('valid', 'invalid', 'highlight-invalid');
                if (validationIcon) {
                    validationIcon.classList.remove('fa-check-circle', 'text-green-500', 'fa-exclamation-circle', 'text-red-500');
                }
            }
        }

        nextBtn.addEventListener('click', () => {
            if (validateCurrentSection()) {
                if (currentStep < sections.length - 1) {
                    progressBarFill.classList.add('striped'); // Add striped effect on next
                    setTimeout(() => {
                        showSection(currentStep + 1);
                    }, 300); // Short delay to show striped effect
                }
            } else {
                showCustomAlert('Aten√ß√£o!', 'Por favor, preencha todos os campos obrigat√≥rios para prosseguir.', 'red');
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                progressBarFill.classList.add('striped'); // Add striped effect on prev
                setTimeout(() => {
                    showSection(currentStep - 1);
                }, 300); // Short delay to show striped effect
            }
        });

        laborForm.addEventListener('submit', (e) => {
            // This submit button is now for the FINALIZA√á√ÉO step (step-11)
            // The probability meter is step-12, which has a separate print button.
            if (!validateCurrentSection()) {
                e.preventDefault();
                showCustomAlert('Aten√ß√£o!', 'Por favor, preencha todos os campos obrigat√≥rios antes de enviar o formul√°rio.', 'red');
            } else {
                console.log("Formul√°rio validado e pronto para ser enviado via FormSubmit.co");
            }
        });

        function showCustomAlert(title, message, type = 'green') {
            const modalOverlay = document.getElementById('successModal');
            const modalTitle = modalOverlay.querySelector('.modal-title');
            const modalMessage = modalOverlay.querySelector('.modal-message');
            const modalCloseBtn = modalOverlay.querySelector('#closeModalBtn');

            modalTitle.textContent = title;
            modalMessage.textContent = message;

            if (type === 'red') {
                modalTitle.classList.remove('text-green-600');
                modalTitle.classList.add('text-red-600');
            } else {
                modalTitle.classList.remove('text-red-600');
                modalTitle.classList.add('text-green-600');
            }
            modalCloseBtn.textContent = 'Ok';

            modalOverlay.classList.add('show');
        }

        closeModalBtn.addEventListener('click', () => {
            successModal.classList.remove('show');
            const modalTitle = successModal.querySelector('.modal-title');
            modalTitle.classList.remove('text-red-600');
            modalTitle.classList.add('text-green-600');
            modalTitle.textContent = 'Mensagem do Formul√°rio';
        });


        // --- Specific Field Logics ---

        const cepInput = document.getElementById('cep');
        cepInput.addEventListener('blur', () => {
            const cep = cepInput.value.replace(/\D/g, '');
            if (cep.length === 8) {
                fetch(`https://viacep.com.br/ws/${cep}/json/`)
                    .then(response => response.json())
                    .then(data => {
                        if (!data.erro) {
                            document.getElementById('endereco_rua').value = data.logradouro;
                            document.getElementById('nome_bairro').value = data.bairro;
                            document.getElementById('nome_cidade').value = data.localidade;
                            document.getElementById('nome_estado').value = data.uf;
                            document.getElementById('numero_casa').classList.add('highlight-invalid');
                            document.getElementById('numero_casa').focus();
                            inputValidationHandler({ target: document.getElementById('endereco_rua') });
                            inputValidationHandler({ target: document.getElementById('nome_bairro') });
                            inputValidationHandler({ target: document.getElementById('nome_cidade') });
                            inputValidationHandler({ target: document.getElementById('nome_estado') });
                        } else {
                            showCustomAlert('Erro!', 'CEP n√£o encontrado.', 'red');
                            cepInput.classList.add('invalid');
                            inputValidationHandler({ target: cepInput });
                        }
                    })
                    .catch(error => {
                        console.error('Erro ao buscar CEP:', error);
                        showCustomAlert('Erro!', 'Erro ao buscar CEP. Verifique a conex√£o.', 'red');
                        cepInput.classList.add('invalid');
                        inputValidationHandler({ target: cepInput });
                    });
            } else {
                cepInput.classList.add('invalid');
                inputValidationHandler({ target: cepInput });
            }
        });

        const cepEmpresaInput = document.getElementById('cep_empresa');
        cepEmpresaInput.addEventListener('blur', () => {
            const cep = cepEmpresaInput.value.replace(/\D/g, '');
            if (cep.length === 8) {
                fetch(`https://viacep.com.br/ws/${cep}/json/`)
                    .then(response => response.json())
                    .then(data => {
                        if (!data.erro) {
                            document.getElementById('endereco_empresa_rua').value = data.logradouro;
                            document.getElementById('bairro_empresa').value = data.bairro;
                            document.getElementById('cidade_empresa').value = data.localidade;
                            document.getElementById('estado_empresa').value = data.uf;
                            document.getElementById('numero_empresa').classList.add('highlight-invalid');
                            document.getElementById('numero_empresa').focus();
                            inputValidationHandler({ target: document.getElementById('endereco_empresa_rua') });
                            inputValidationHandler({ target: document.getElementById('bairro_empresa') });
                            inputValidationHandler({ target: document.getElementById('cidade_empresa') });
                            inputValidationHandler({ target: document.getElementById('estado_empresa') });
                        } else {
                            showCustomAlert('Erro!', 'CEP da empresa n√£o encontrado.', 'red');
                            cepEmpresaInput.classList.add('invalid');
                            inputValidationHandler({ target: cepEmpresaInput });
                        }
                    })
                    .catch(error => {
                        console.error('Erro ao buscar CEP da empresa:', error);
                        showCustomAlert('Erro!', 'Erro ao buscar CEP da empresa. Verifique a conex√£o.', 'red');
                        cepEmpresaInput.classList.add('invalid');
                        inputValidationHandler({ target: cepEmpresaInput });
                    });
            } else {
                cepEmpresaInput.classList.add('invalid');
                inputValidationHandler({ target: cepEmpresaInput });
            }
        });

        const dataAdmissaoInput = document.getElementById('data_admissao');
        const dataDemissaoInput = document.getElementById('data_demissao');
        const tempoRegistroP = document.getElementById('tempo_registro');

        function calculateEmploymentTime() {
            const admissao = new Date(dataAdmissaoInput.value);
            const demissao = dataDemissaoInput.value ? new Date(dataDemissaoInput.value) : new Date();

            if (isNaN(admissao.getTime())) {
                tempoRegistroP.textContent = '';
                return;
            }

            let years = demissao.getFullYear() - admissao.getFullYear();
            let months = demissao.getMonth() - admissao.getMonth();
            let days = demissao.getDate() - admissao.getDate();

            if (days < 0) {
                months--;
                days += new Date(demissao.getFullYear(), demissao.getMonth(), 0).getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }

            let result = [];
            if (years > 0) result.push(`${years} ano(s)`);
            if (months > 0) result.push(`${months} m√™s(es)`);
            if (days > 0) result.push(`${days} dia(s)`);

            tempoRegistroP.textContent = `Tempo de registro: ${result.join(', ')}`;
        }

        dataAdmissaoInput.addEventListener('change', calculateEmploymentTime);
        dataDemissaoInput.addEventListener('change', calculateEmploymentTime);

        const salarioAdmissaoInput = document.getElementById('salario_admissao');
        const ultimoSalarioInput = document.getElementById('ultimo_salario');
        const diferencaSalarialP = document.getElementById('diferenca_salarial');

        function calculateSalaryDifference() {
            const salarioAdmissao = parseFloat(salarioAdmissaoInput.value.replace(/\./g, '').replace(',', '.') || '0');
            const ultimoSalario = parseFloat(ultimoSalarioInput.value.replace(/\./g, '').replace(',', '.') || '0');

            if (isNaN(salarioAdmissao) || isNaN(ultimoSalario)) {
                diferencaSalarialP.textContent = '';
                return;
            }

            const diferenca = ultimoSalario - salarioAdmissao;
            const diferencaFormatada = Math.abs(diferenca).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

            if (diferenca > 0) {
                diferencaSalarialP.textContent = `Diferen√ßa salarial: ${diferencaFormatada} (aumento durante o contrato)`;
                diferencaSalarialP.style.color = '#2ed573'; // Green for positive difference
            } else if (diferenca < 0) {
                diferencaSalarialP.textContent = `Diferen√ßa salarial: ${diferencaFormatada} (redu√ß√£o durante o contrato)`;
                diferencaSalarialP.style.color = '#ff4757'; // Red for negative difference
            } else {
                diferencaSalarialP.textContent = `N√£o houve aumento salarial.`;
                diferencaSalarialP.style.color = '#a0a0a0'; // Neutral color
            }
        }

        salarioAdmissaoInput.addEventListener('input', calculateSalaryDifference);
        ultimoSalarioInput.addEventListener('input', calculateSalaryDifference);

        const tipoJornadaSelect = document.getElementById('tipo_jornada');
        const cargaHorariaSemanalGroup = document.getElementById('carga_horaria_semanal_group');
        const cargaHorariaSemanalInput = document.getElementById('carga_horaria_semanal');
        const jornadaPersonalizadaGroup = document.getElementById('jornada_personalizada_group');
        const jornadaPersonalizadaInput = document.getElementById('jornada_personalizada');

        tipoJornadaSelect.addEventListener('change', () => {
            const selectedJornada = tipoJornadaSelect.value;
            let cargaHoraria = '';

            jornadaPersonalizadaGroup.style.display = 'none';
            jornadaPersonalizadaInput.removeAttribute('required');
            jornadaPersonalizadaInput.value = '';
            inputValidationHandler({ target: jornadaPersonalizadaInput });

            switch (selectedJornada) {
                case 'tempo_integral':
                    cargaHoraria = '8h di√°rias / 44h semanais (m√°ximo)';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'parcial':
                    cargaHoraria = 'At√© 25h semanais (sem extras) ou at√© 30h semanais (com extras)';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case '12x36':
                    cargaHoraria = '12h de trabalho seguidas por 36h de descanso';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'noturna':
                    cargaHoraria = 'Entre 22h e 5h (urbano) / 21h e 5h (rural) - Hora noturna reduzida';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'turnos_ininterruptos':
                    cargaHoraria = 'Turnos alternados (ex: 6h x 6h, 8h x 8h) - Requer revezamento';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'flexivel':
                    cargaHoraria = 'Hor√°rio vari√°vel dentro de limites pr√©-estabelecidos (m√©dia n√£o ultrapassa 44h)';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'domestico':
                    cargaHoraria = 'M√°ximo de 44h semanais e 8h di√°rias';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'rural':
                    cargaHoraria = 'M√°ximo de 8h di√°rias e 44h/48h semanais (conforme atividade)';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    break;
                case 'outro_jornada':
                    cargaHoraria = 'Especificar abaixo';
                    cargaHorariaSemanalGroup.style.display = 'block';
                    jornadaPersonalizadaInput.setAttribute('required', 'required');
                    break;
                default:
                    cargaHorariaSemanalGroup.style.display = 'none';
                    break;
            }
            cargaHorariaSemanalInput.value = cargaHoraria;
            inputValidationHandler({ target: cargaHorariaSemanalInput });
        });


        const desvioFuncaoSelect = document.getElementById('desvio_funcao_sim_nao');
        const desvioFuncaoQuestions = document.getElementById('desvio_funcao_questions');

        desvioFuncaoSelect.addEventListener('change', () => {
            if (desvioFuncaoSelect.value === 'sim') {
                desvioFuncaoQuestions.style.display = 'block';
                desvioFuncaoQuestions.querySelectorAll('input, select, textarea').forEach(input => input.setAttribute('required', 'required'));
            } else {
                desvioFuncaoQuestions.style.display = 'none';
                desvioFuncaoQuestions.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            }
        });

        const faziaHorasExtrasSelect = document.getElementById('fazia_horas_extras');
        const horasExtrasQuestions = document.getElementById('horas_extras_questions');

        faziaHorasExtrasSelect.addEventListener('change', () => {
            if (faziaHorasExtrasSelect.value === 'sim') {
                horasExtrasQuestions.style.display = 'block';
                horasExtrasQuestions.querySelectorAll('input, select').forEach(input => input.setAttribute('required', 'required'));
            } else {
                horasExtrasQuestions.style.display = 'none';
                horasExtrasQuestions.querySelectorAll('input, select').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            }
        });

        const tiravaIntervaloSelect = document.getElementById('tirava_intervalo');
        const intervaloQuestions = document.getElementById('intervalo_questions');

        tiravaIntervaloSelect.addEventListener('change', () => {
            if (tiravaIntervaloSelect.value === 'nao' || tiravaIntervaloSelect.value === 'parcialmente') {
                intervaloQuestions.style.display = 'block';
                document.getElementById('motivo_nao_intervalo').setAttribute('required', 'required');
            } else {
                intervaloQuestions.style.display = 'none';
                document.getElementById('motivo_nao_intervalo').removeAttribute('required');
                document.getElementById('motivo_nao_intervalo').value = '';
                document.getElementById('motivo_nao_intervalo').classList.remove('valid', 'invalid', 'highlight-invalid');
                inputValidationHandler({ target: document.getElementById('motivo_nao_intervalo') });
            }
        });


        const afastadoInssSelect = document.getElementById('afastado_inss');
        const inssSubQuestions = document.getElementById('inss_sub_questions');
        const inssTipoBeneficioSelect = document.getElementById('inss_tipo_beneficio');
        const inssAcidenteTrabalhoDateGroup = document.getElementById('inss_acidente_trabalho_date_group');
        const inssDescricaoAcidenteTrabalhoGroup = document.getElementById('inss_descricao_acidente_trabalho_group'); // Corrected ID
        const inssCatGroup = document.getElementById('inss_cat_group');
        const inssCatNumberGroup = document.getElementById('inss_cat_number_group');
        const inssExistenciaCatSelect = document.getElementById('inss_existencia_cat');
        const inssDetalhesAcidenteTitle = document.getElementById('inss_detalhes_acidente_title');
        const inssDetalhesAcidenteQuestions = document.getElementById('inss_detalhes_acidente_questions');


        afastadoInssSelect.addEventListener('change', () => {
            if (afastadoInssSelect.value === 'sim') {
                inssSubQuestions.style.display = 'block';
                inssSubQuestions.querySelectorAll('input, select, textarea').forEach(input => {
                    if (input.id !== 'inss_data_acidente_trabalho' && input.id !== 'inss_descricao_acidente_trabalho' &&
                        input.id !== 'inss_existencia_cat' && input.id !== 'inss_numero_cat' &&
                        !inssDetalhesAcidenteQuestions.contains(input)) {
                        input.setAttribute('required', 'required');
                    }
                });
                inssTipoBeneficioSelect.dispatchEvent(new Event('change'));
            } else {
                inssSubQuestions.style.display = 'none';
                inssSubQuestions.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.checked = false;
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
                inssAcidenteTrabalhoDateGroup.style.display = 'none';
                inssDescricaoAcidenteTrabalhoGroup.style.display = 'none'; // Corrected ID
                inssCatGroup.style.display = 'none';
                inssCatNumberGroup.style.display = 'none';
                inssDetalhesAcidenteTitle.style.display = 'none';
                inssDetalhesAcidenteQuestions.style.display = 'none';
            }
        });

        inssTipoBeneficioSelect.addEventListener('change', () => {
            if (inssTipoBeneficioSelect.value === 'auxilio_doenca_acidentario') {
                inssAcidenteTrabalhoDateGroup.style.display = 'block';
                inssDescricaoAcidenteTrabalhoGroup.style.display = 'block'; // Corrected ID
                inssCatGroup.style.display = 'block';
                inssDetalhesAcidenteTitle.style.display = 'block';
                inssDetalhesAcidenteQuestions.style.display = 'block';

                document.getElementById('inss_data_acidente_trabalho').setAttribute('required', 'required');
                document.getElementById('inss_descricao_acidente_trabalho').setAttribute('required', 'required');
                document.getElementById('inss_existencia_cat').setAttribute('required', 'required');
                inssDetalhesAcidenteQuestions.querySelectorAll('input, select, textarea').forEach(input => input.setAttribute('required', 'required'));

            } else {
                inssAcidenteTrabalhoDateGroup.style.display = 'none';
                inssDescricaoAcidenteTrabalhoGroup.style.display = 'none'; // Corrected ID
                inssCatGroup.style.display = 'none';
                inssCatNumberGroup.style.display = 'none';
                inssDetalhesAcidenteTitle.style.display = 'none';
                inssDetalhesAcidenteQuestions.style.display = 'none';

                document.getElementById('inss_data_acidente_trabalho').removeAttribute('required');
                document.getElementById('inss_descricao_acidente_trabalho').removeAttribute('required');
                document.getElementById('inss_existencia_cat').removeAttribute('required');
                document.getElementById('inss_numero_cat').removeAttribute('required');
                inssDetalhesAcidenteQuestions.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            }
        });

        inssExistenciaCatSelect.addEventListener('change', () => {
            if (inssExistenciaCatSelect.value === 'sim') {
                inssCatNumberGroup.style.display = 'block';
                document.getElementById('inss_numero_cat').setAttribute('required', 'required');
            } else {
                inssCatNumberGroup.style.display = 'none';
                document.getElementById('inss_numero_cat').removeAttribute('required');
                document.getElementById('inss_numero_cat').value = '';
                document.getElementById('inss_numero_cat').classList.remove('valid', 'invalid', 'highlight-invalid');
                inputValidationHandler({ target: document.getElementById('inss_numero_cat') });
            }
        });


        const noWitnessesCheckbox = document.getElementById('no_witnesses');
        const witnessDetailsGroup = document.getElementById('witness_details_group');

        noWitnessesCheckbox.addEventListener('change', () => {
            const inputs = witnessDetailsGroup.querySelectorAll('input, select, textarea');
            if (noWitnessesCheckbox.checked) {
                witnessDetailsGroup.style.display = 'none';
                inputs.forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            } else {
                witnessDetailsGroup.style.display = 'block';
            }
        });

        function prefillJornadaAndIntervalo() {
            document.getElementById('jornada_horario_inicio_prefilled').value = document.getElementById('horario_inicio').value;
            document.getElementById('jornada_horario_fim_prefilled').value = document.getElementById('horario_fim').value;
            document.getElementById('intervalo_inicio_prefilled').value = document.getElementById('intervalo_inicio').value;
            document.getElementById('intervalo_fim_prefilled').value = document.getElementById('intervalo_fim').value;

            inputValidationHandler({ target: document.getElementById('jornada_horario_inicio_prefilled') });
            inputValidationHandler({ target: document.getElementById('jornada_horario_fim_prefilled') });
            inputValidationHandler({ target: document.getElementById('intervalo_inicio_prefilled') });
            inputValidationHandler({ target: document.getElementById('intervalo_fim_prefilled') });
        }

        nextBtn.addEventListener('click', () => {
            if (currentStep === 4 || currentStep === 5) {
                prefillJornadaAndIntervalo();
            }
        });

        const generoSelect = document.getElementById('genero');
        const maternidadeSection = document.getElementById('step-8');
        const estaGravidaSelect = document.getElementById('esta_gravida');
        const gravidezQuestions = document.getElementById('gravidez_questions');

        function toggleMaternitySection() {
            if (generoSelect.value === 'feminino') {
                maternidadeSection.style.display = 'block';
                estaGravidaSelect.setAttribute('required', 'required');
                estaGravidaSelect.dispatchEvent(new Event('change'));
            } else {
                maternidadeSection.style.display = 'none';
                maternidadeSection.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.checked = false;
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
                gravidezQuestions.style.display = 'none';
            }
        }

        function toggleGravidezQuestions() {
            if (estaGravidaSelect.value === 'sim') {
                gravidezQuestions.style.display = 'block';
                gravidezQuestions.querySelectorAll('input, select, textarea').forEach(input => input.setAttribute('required', 'required'));
            } else {
                gravidezQuestions.style.display = 'none';
                gravidezQuestions.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.checked = false;
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            }
        }

        generoSelect.addEventListener('change', toggleMaternitySection);
        estaGravidaSelect.addEventListener('change', toggleGravidezQuestions);


        const empregadorPublicoSelect = document.getElementById('empregador_publico');
        const publicServantQuestionsDiv = document.getElementById('public_servant_questions');

        function togglePublicServantQuestions() {
            if (empregadorPublicoSelect.value === 'sim') {
                publicServantQuestionsDiv.style.display = 'block';
                publicServantQuestionsDiv.querySelectorAll('input, select, textarea').forEach(input => input.setAttribute('required', 'required'));
            } else {
                publicServantQuestionsDiv.style.display = 'none';
                publicServantQuestionsDiv.querySelectorAll('input, select, textarea').forEach(input => {
                    input.removeAttribute('required');
                    input.value = '';
                    input.checked = false;
                    input.classList.remove('valid', 'invalid', 'highlight-invalid');
                    inputValidationHandler({ target: input });
                });
            }
        }

        empregadorPublicoSelect.addEventListener('change', togglePublicServantQuestions);


        $(document).ready(function() {
            $('#cpf').mask('000.000.000-00');
            $('#rg').mask('00.000.000-0');
            $('#cep').mask('00000-000');
            $('#whatsapp').mask('(00) 00000-0000');
            $('#telefone_emergencia').mask('(00) 00000-0000');
            $('#cnpj').mask('00.000.000/0000-00');
            $('#cep_empresa').mask('00000-000');
            $('.mask-money').mask('000.000.000.000.000,00', {reverse: true});
            $('.mask-phone').mask('(00) 00000-0000');
            $('.mask-cpf').mask('000.000.000-00');

            $('input[type="date"]').unmask();
        });

        const takeSelfieBtn = document.getElementById('takeSelfieBtn');
        const uploadSelfieBtn = document.getElementById('uploadSelfieBtn');
        const retakeSelfieBtn = document.getElementById('retakeSelfieBtn');
        const selfieVideo = document.getElementById('selfieVideo');
        const selfieCanvas = document.getElementById('selfieCanvas');
        const selfieDataInput = document.getElementById('selfieDataInput');
        const uploadSelfieInput = document.getElementById('uploadSelfieInput');
        let stream;

        async function startCamera() {
            selfieVideo.style.display = 'block';
            selfieCanvas.style.display = 'none';
            selfieVideo.srcObject = null;

            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                selfieVideo.srcObject = stream;
                takeSelfieBtn.textContent = 'Capturar Selfie';
                takeSelfieBtn.classList.remove('hidden');
                uploadSelfieBtn.classList.remove('hidden');
                retakeSelfieBtn.classList.add('hidden');
            } catch (err) {
                console.error("Erro ao acessar a c√¢mera:", err);
                showCustomAlert('Erro!', "N√£o foi poss√≠vel acessar a c√¢mera. Verifique as permiss√µes ou tente 'Escolher Arquivo'.", 'red');
                takeSelfieBtn.classList.add('hidden');
                uploadSelfieBtn.classList.remove('hidden');
            }
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                selfieVideo.srcObject = null;
            }
        }

        takeSelfieBtn.addEventListener('click', async () => {
            if (selfieVideo.srcObject) {
                const context = selfieCanvas.getContext('2d');
                selfieCanvas.width = selfieVideo.videoWidth;
                selfieCanvas.height = selfieVideo.videoHeight;
                context.drawImage(selfieVideo, 0, 0, selfieCanvas.width, selfieCanvas.height);
                selfieDataInput.value = selfieCanvas.toDataURL('image/png');
                selfieCanvas.style.display = 'block';
                selfieVideo.style.display = 'none';
                selfieCanvas.setAttribute('data-selfie-taken', 'true');
                takeSelfieBtn.classList.add('hidden');
                uploadSelfieBtn.classList.add('hidden');
                retakeSelfieBtn.classList.remove('hidden');
                stopCamera();
            } else {
                await startCamera();
            }
        });

        uploadSelfieBtn.addEventListener('click', () => {
            uploadSelfieInput.click();
        });

        uploadSelfieInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        const context = selfieCanvas.getContext('2d');
                        selfieCanvas.width = img.width;
                        selfieCanvas.height = img.height;
                        context.drawImage(img, 0, 0, selfieCanvas.width, selfieCanvas.height);
                        selfieDataInput.value = selfieCanvas.toDataURL('image/png');
                        selfieCanvas.style.display = 'block';
                        selfieVideo.style.display = 'none';
                        selfieCanvas.setAttribute('data-selfie-taken', 'true');
                        takeSelfieBtn.classList.add('hidden');
                        uploadSelfieBtn.classList.add('hidden');
                        retakeSelfieBtn.classList.remove('hidden');
                        stopCamera();
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        retakeSelfieBtn.addEventListener('click', () => {
            selfieDataInput.value = '';
            selfieCanvas.style.display = 'none';
            selfieCanvas.removeAttribute('data-selfie-taken');
            takeSelfieBtn.textContent = 'Tirar Selfie';
            takeSelfieBtn.classList.remove('hidden');
            uploadSelfieBtn.classList.remove('hidden');
            retakeSelfieBtn.classList.add('hidden');
            stopCamera();
        });


        document.getElementById('documentos_comprovacao').addEventListener('change', (event) => inputValidationHandler(event));
        document.getElementById('documentos_anexo').addEventListener('change', (event) => inputValidationHandler(event));
        document.getElementById('documentos_gravidez').addEventListener('change', (event) => inputValidationHandler(event));

        printBtn.addEventListener('click', () => {
            // Temporarily show all sections for printing
            sections.forEach(section => {
                section.style.display = 'block';
            });

            // Populate print-friendly elements (if needed, for more complex data presentation)
            const allInputs = laborForm.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                let displayValue = '';
                if (input.type === 'checkbox' || input.type === 'radio') {
                    if (input.checked) {
                        const label = document.querySelector(`label[for="${input.id}"]`);
                        displayValue = label ? label.textContent.trim() : input.value;
                        displayValue = `‚úÖ ${displayValue}`;
                    } else {
                        displayValue = `‚ùå N√£o selecionado`;
                    }
                } else if (input.tagName === 'SELECT') {
                    const selectedOption = input.options[input.selectedIndex];
                    displayValue = selectedOption ? selectedOption.textContent : 'N√£o preenchido';
                } else if (input.type === 'file') {
                    displayValue = input.files.length > 0 ? `${input.files.length} arquivo(s) anexado(s)` : 'Nenhum arquivo anexado';
                } else if (input.value.trim() === '') {
                    displayValue = 'N√£o preenchido';
                } else {
                    displayValue = input.value;
                }

                let answerDisplay = document.createElement('div');
                answerDisplay.classList.add('print-answer');
                if (displayValue === 'N√£o preenchido' || displayValue.startsWith('‚ùå')) {
                    answerDisplay.classList.add('empty');
                }
                answerDisplay.textContent = displayValue;

                const formGroup = input.closest('.form-group');
                if (formGroup) {
                    const existingAnswer = formGroup.querySelector('.print-answer');
                    if (existingAnswer) {
                        existingAnswer.remove();
                    }
                    formGroup.appendChild(answerDisplay);
                }
            });

            const selfieCanvasForPrint = document.getElementById('selfieCanvas');
            if (selfieDataInput.value && selfieCanvasForPrint) {
                selfieCanvasForPrint.setAttribute('data-selfie-taken', 'true');
            } else if (selfieCanvasForPrint) {
                selfieCanvasForPrint.removeAttribute('data-selfie-taken');
            }

            // Prepare probability meter for print
            const probabilityValue = document.getElementById('probabilityValue').textContent;
            const probabilityText = document.getElementById('probabilityText').textContent;
            const riskAnalysisText = document.getElementById('riskFactors').textContent;
            const riskAnalysisClasses = document.getElementById('riskAnalysis').className.split(' ').filter(cls => cls.includes('-probability') || cls.includes('risk-analysis'));

            const printProbabilitySection = document.createElement('div');
            printProbabilitySection.classList.add('probability-gauge-print');
            printProbabilitySection.innerHTML = `
                <h2>‚öñÔ∏è Probabilidade de √äxito do Caso</h2>
                <div class="probability-value-print">${probabilityValue}</div>
                <div class="probability-text-print">${probabilityText}</div>
                <div class="risk-analysis-print ${riskAnalysisClasses.map(cls => cls.replace('-probability', '-print')).join(' ')}">
                    <div class="risk-title">An√°lise de Fatores</div>
                    <div class="risk-factors">${riskAnalysisText}</div>
                </div>
            `;
            // Append this section to the form for printing, then remove after.
            laborForm.appendChild(printProbabilitySection);


            window.print();

            sections.forEach((section, index) => {
                if (index !== currentStep) {
                    section.style.display = 'none';
                }
            });

            laborForm.querySelectorAll('.print-answer').forEach(el => el.remove());
            if (selfieCanvasForPrint) {
                selfieCanvasForPrint.removeAttribute('data-selfie-taken');
            }
            printProbabilitySection.remove(); // Remove the temporary print section
        });


        // --- Probability Meter Logic ---
        let currentScore = 0;
        const maxPossibleScore = 100; // Max score from the 5 questions (20+15+20+25+20)
        let totalQuestionsForProbability = 5; // Number of questions in the probability meter
        let answeredQuestionsForProbability = 0;

        function updateGauge(percentage) {
            const needle = document.getElementById('gaugeNeedle');
            const fill = document.getElementById('gaugeFill');
            const value = document.getElementById('probabilityValue');
            const text = document.getElementById('probabilityText');
            const analysis = document.getElementById('riskAnalysis');
            
            const rotation = -90 + (percentage * 1.8);
            needle.style.transform = `translate(-50%, -100%) rotate(${rotation}deg)`;
            
            const circumference = 80 * Math.PI; // Radius 80, half circle
            const offset = circumference - (circumference * percentage / 100);
            fill.style.strokeDashoffset = offset;
            
            value.textContent = Math.round(percentage) + '%';
            
            let category, className, analysisText;
            
            if (percentage <= 30) {
                category = 'BAIXA PROBABILIDADE';
                className = 'low-probability';
                analysis.className = 'risk-analysis low';
                analysisText = 'O caso apresenta elementos desfavor√°veis. Recomenda-se buscar mais evid√™ncias e avaliar cuidadosamente os custos processuais.';
            } else if (percentage <= 70) {
                category = 'M√âDIA PROBABILIDADE';
                className = 'medium-probability';
                analysis.className = 'risk-analysis medium';
                analysisText = 'O caso tem potencial, mas requer estrat√©gia s√≥lida. Alguns elementos precisam ser fortalecidos para aumentar as chances de √™xito.';
            } else {
                category = 'ALTA PROBABILIDADE';
                className = 'high-probability';
                analysis.className = 'risk-analysis high';
                analysisText = 'Excelentes perspectivas de √™xito! O caso apresenta elementos s√≥lidos e bem fundamentados. Recomenda-se prosseguir com confian√ßa.';
            }
            
            value.className = `probability-value ${className}`;
            text.className = `probability-text ${className}`;
            text.textContent = category;
            
            document.getElementById('riskFactors').textContent = analysisText;
        }

        function updateProbabilityMeter() {
            currentScore = 0;
            answeredQuestionsForProbability = 0;

            // 1. Houve rescis√£o do contrato de trabalho (demiss√£o, pedido de demiss√£o, etc.)?
            const dataDemissao = document.getElementById('data_demissao').value;
            const trabalhandoAinda = document.getElementById('trabalhando_ainda').value;

            if (dataDemissao) { // If dataDemissao is filled, there was a termination
                currentScore += 20; // Sim
                answeredQuestionsForProbability++;
            } else if (trabalhandoAinda === 'nao') { // Not working, but no demission date, implies a dispute or informal termination
                 currentScore += 10; // Partial score for potential dispute
                 answeredQuestionsForProbability++;
            } else if (trabalhandoAinda === 'sim' || trabalhandoAinda === 'ferias') {
                currentScore += 0; // Still working, no termination claim here
                answeredQuestionsForProbability++;
            }


            // 2. H√° registro em carteira de trabalho?
            const tipoContrato = document.getElementById('tipo_contrato').value;
            if (tipoContrato === 'clt') {
                currentScore += 15; // Sim, completo
                answeredQuestionsForProbability++;
            } else if (tipoContrato === 'temporario' || tipoContrato === 'estagio' || tipoContrato === 'aprendizagem' || tipoContrato === 'intermitente') {
                currentScore += 10; // Parcial
                answeredQuestionsForProbability++;
            } else if (tipoContrato === 'autonomo_pj' || tipoContrato === 'outro_contrato') {
                currentScore += 5; // N√£o h√° registro (lower score for no formal employment)
                answeredQuestionsForProbability++;
            }


            // 3. Existem testemunhas do trabalho realizado?
            const noWitnesses = document.getElementById('no_witnesses').checked;
            const testemunha1Nome = document.getElementById('testemunha1_nome').value.trim();
            const testemunha2Nome = document.getElementById('testemunha2_nome').value.trim();

            if (!noWitnesses && (testemunha1Nome && testemunha2Nome)) {
                currentScore += 20; // 3 ou mais (approximation for 2+ witnesses)
                answeredQuestionsForProbability++;
            } else if (!noWitnesses && (testemunha1Nome || testemunha2Nome)) {
                currentScore += 15; // 1 a 2
                answeredQuestionsForProbability++;
            } else if (noWitnesses) {
                currentScore += 0; // Nenhuma
                answeredQuestionsForProbability++;
            }


            // 4. O funcion√°rio fazia horas extras?
            const faziaHorasExtras = document.getElementById('fazia_horas_extras').value;
            const recebiaHorasExtras = document.getElementById('recebia_horas_extras').value;

            if (faziaHorasExtras === 'sim' && (recebiaHorasExtras === 'nao' || recebiaHorasExtras === 'parcialmente')) {
                currentScore += 25; // Sim, com comprova√ß√£o (potential claim)
                answeredQuestionsForProbability++;
            } else if (faziaHorasExtras === 'sim' && recebiaHorasExtras === 'sim') {
                currentScore += 10; // Sim, mas recebia (less likely for claim)
                answeredQuestionsForProbability++;
            } else if (faziaHorasExtras === 'nao') {
                currentScore += 0; // N√£o
                answeredQuestionsForProbability++;
            }


            // 5. H√° documentos/comprovantes do v√≠nculo empregat√≠cio?
            const documentosAnexo = document.getElementById('documentos_anexo').files.length > 0;
            const documentosComprovacao = document.getElementById('documentos_comprovacao').files.length > 0;
            const documentosGravidez = document.getElementById('documentos_gravidez').files.length > 0;

            if (documentosAnexo || documentosComprovacao || documentosGravidez) {
                currentScore += 20; // Sim
                answeredQuestionsForProbability++;
            } else {
                currentScore += 5; // Poucos/Nenhum (still some base score for general case)
                answeredQuestionsForProbability++;
            }

            // Calculate percentage based on currentScore and maxPossibleScore
            let percentage = (currentScore / maxPossibleScore) * 100;
            
            // Clamp percentage to a reasonable range (e.g., 10% to 90%)
            percentage = Math.max(10, Math.min(90, percentage));

            updateGauge(percentage);
        }

        // --- Particle Animation Logic ---
        const particlesContainer = document.getElementById('particles-container');
        function createParticle() {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            const size = Math.random() * 5 + 2; // Size between 2px and 7px
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.left = `${Math.random() * 100}vw`;
            particle.style.top = `${100 + Math.random() * 20}vh`; // Start below viewport
            particle.style.animationDuration = `${Math.random() * 10 + 10}s`; // 10-20s
            particle.style.animationDelay = `-${Math.random() * 10}s`; // Stagger animation
            particlesContainer.appendChild(particle);

            // Remove particle after animation ends to prevent accumulation
            particle.addEventListener('animationend', () => {
                particle.remove();
            });
        }

        function generateParticles() {
            const numParticles = 50; // Adjust as needed
            for (let i = 0; i < numParticles; i++) {
                createParticle();
            }
            // Re-create particles periodically
            setInterval(() => {
                if (particlesContainer.children.length < numParticles / 2) { // Maintain a minimum number
                    createParticle();
                }
            }, 1000); // Check every second
        }


        // Initial display and real-time validation setup
        showSection(currentStep);
        validateCurrentSectionRealTime();
        toggleMaternitySection();
        togglePublicServantQuestions();
        calculateSalaryDifference();
        generateParticles(); // Start particle animation
    </script>
</body>
</html>
